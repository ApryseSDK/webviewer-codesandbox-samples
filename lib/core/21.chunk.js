/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[21],{490:function(ja,ea,e){function z(e){return Object(Ea.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ca,ea,ha,fa,ia,ja;return Object(Ea.d)(this,function(la){switch(la.label){case 0:return f=e.xb,h=e.Dn,n=e.Kp,r=e.Ru,w=e.x_,x=e.n_,y=Ya.getDocument(),z=[1],[4,Object(Ha.c)(h,{extension:"pdf"})];case 1:return aa=la.ba(),ca=Ya.pa(),fa=(ha=Ma.a).N1,[4,aa.iy()];case 2:return ea=fa.apply(ha,[la.ba().xfdfString,f]),ia=!0,[4,
y.Zf(aa,z,f,ia)];case 3:return la.ba(),[4,y.zg([f+1],ia)];case 4:return la.ba(),ja=ca.mb().filter(function(e){return e.HF()&&e.PageNumber===f}),ca.Ye(ja,{force:!0,source:"contentEditTool"}),[4,ca.tF(ea)];case 5:return la.ba(),Za||(Ya.getDocument().SG(),Ya.pA(f),Ya.Yd()),ba(f),x||w||Aa(f,n,r,w),[2]}})})}function fa(e){if(e)return ia(e.contents);Object(Ba.g)("Unable to extract document content")}function ia(e){e=(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body");e.querySelectorAll("p").forEach(function(e){e.querySelectorAll("span").forEach(function(e){var f=
e.getAttribute("style");f=ha(f,e.innerHTML);e.innerHTML=f});var f=e.getAttribute("style"),h=e.innerHTML.Uh("<br>","");e.innerHTML=ha(f,h)});return e.innerHTML.trim()}function ha(e,f){if(null===e||void 0===e?0:e.includes("bold"))f="<strong>"+f+"</strong>";if(null===e||void 0===e?0:e.includes("italic"))f="<em>"+f+"</em>";if((null===e||void 0===e?0:e.includes("underline:1;"))||(null===e||void 0===e?0:e.includes("text-decoration: underline")))f="<u>"+f+"</u>";return f}function ca(e){if(["STRONG","EM",
"U"].includes(e.tagName)&&null!==e.getAttribute("style")){var f=document.createElement("span"),h=e.style.color;h=na(h);f.setAttribute("style","color:"+h);e.removeAttribute("style");f.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(f)}else"SPAN"===e.tagName&&null!==e.getAttribute("style")?(h=e.style.color,h=na(h),e.setAttribute("style","color:"+h)):"A"===e.tagName&&e.removeAttribute("style")}function ba(e){var f=Ya.pa(),h=f.mb().filter(function(f){return f.Ld()&&f.PageNumber===e});f.Ye(h,{force:!0,
source:"contentEditTool"})}function y(e,f){f.forEach(function(f){fb[e]||(fb[e]=[]);fb[e].find(function(e){return e.id===f.id})||fb[e].push(f)})}function x(e,f){f.forEach(function(f){nb[e]||(nb[e]=[]);nb[e].find(function(e){return e.id===f.id})||nb[e].push(f)})}function w(e,f,h,n){return Object(Ea.b)(void 0,void 0,void 0,function(){var w,x,y,z,aa,ba,ca,ea,ha,fa,ja,la,ka,oa,ma,na,pa,qa;return Object(Ea.d)(this,function(Aa){switch(Aa.label){case 0:if(!e)return[2];w=f.Uh("<p><br></p>","");x=r(w);x=x.replace(/<span style="color: var\(--text-color\);">(.*?)<\/span>/g,
"$1");x=x.replace(/<span class="ql-cursor">(.*?)<\/span>/g,"");y=e.Mc.id;z=e.PageNumber;aa=Wa[z];ba=aa.galleys.find(function(e){return e.id===y});ca=ia(ba.contents);ea=wa(z,aa,ca,x,y);if(""===ea)return[3,2];ha=new TextEncoder;fa=ha.encode(ea);ja=fa.buffer;la=Object(ya.c)()||"https://www.pdftron.com/webfonts/v2/";ka=Ya.getDocument();return[4,ka.bd([z],void 0,!0)];case 1:return oa=Aa.ba(),ha=new TextEncoder,ma=ha.encode(""),na=ma.buffer,Sa.postMessage({cmd:"importText",pdfFile:oa,pageNumber:z,webFontURL:la,
galleyId:y,importData:ja,tableData:na,isSearchReplace:h,callbackMapId:n},[ja,na]),pa={},ba&&(qa=ba.galleyBox,pa={top:qa.top,left:qa.left,bottom:qa.bottom,right:qa.right}),Object(Ka.C)(ca,x,pa),[3,3];case 2:Object(Ba.g)("Unable to generate import XML"),Aa.label=3;case 3:return[2]}})})}function r(e){var f=new DOMParser,h=f.parseFromString(e,"text/xml");h.querySelector("parsererror")&&(h=f.parseFromString("<Root>"+e+"</Root>","text/xml"));h.querySelectorAll("a").forEach(function(e){var f=e.childNodes[0];
Array.from(e.querySelectorAll("*")).find(function(e){return"u"===e.tagName.toLowerCase()})||(e=document.createElement("u"),f.after(e),e.appendChild(f))});return(new XMLSerializer).serializeToString(h)}function h(e,f,h){return Object(Ea.b)(void 0,void 0,void 0,function(){var n,r,w,x;return Object(Ea.d)(this,function(y){switch(y.label){case 0:return ba(f),nb[f]=[],fb[f]=[],[4,e.bd([f],void 0,!0)];case 1:return n=y.ba(),r=new TextEncoder,w=r.encode(""),x=w.buffer,Sa.postMessage({cmd:"exportFile",pageNumber:f,
performExport:h,pdfFile:n,tableData:x},[n,x]),[2]}})})}function f(e){return Object(Ea.b)(void 0,void 0,void 0,function(){return Object(Ea.d)(this,function(){Ta||(Ya=e.Da,Ta=new Promise(function(e,f){var h=window.Core.ContentEdit.getWorkerPath(),n=window.Core.ContentEdit.getResourcePath();Sa=new Worker(h+"InfixServerModule.js");Sa.onmessage=function(h){pa(h,e,f)};Sa.postMessage({cmd:"isReady",resourcePath:n})}));return[2,Ta]})})}function n(e,f,h,n){this.top=e;this.left=f;this.bottom=h;this.right=n;
this.topVal=function(){return Math.round(this.top)};this.bottomVal=function(){return Math.round(this.bottom)};this.leftVal=function(){return Math.round(this.left)};this.rightVal=function(){return Math.round(this.right)};this.height=function(){return Math.round(Math.abs(this.top-this.bottom))};this.width=function(){return Math.round(this.right-this.left)};this.zx=function(e){return this.topVal()!==e.topVal()||this.leftVal()!==e.leftVal()||this.bottomVal()!==e.bottomVal()||this.rightVal()!==e.rightVal()}}
function aa(e,f,h,n,r){this.id=e;this.pagenum=f;this.galleysContents=h;this.contents=n;this.galleyBox=r;Object(Ka.B)(nb)}function ka(e,f,h,n){this.id=f;this.type=e;this.bbox=h;this.pagenum=n}function la(e,f,h,n,r){this.id=e;this.pagecount=f;this.pageBBox=h;this.galleys=n;this.objects=r}function ma(e,f){this.family=e;this.variations=f}function wa(e,f,h,n,r){var w=[],x=[];(new DOMParser).parseFromString(n,"text/html").documentElement.querySelectorAll("p").forEach(function(e,f){w[f]=e.innerHTML;x[f]=
{fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,color:na(e.style.color)}});h=(new DOMParser).parseFromString(h,"text/html");var y=null;h.documentElement.querySelectorAll("p").forEach(function(e,f){if(f<w.length){var h=(new DOMParser).parseFromString(w[f],"text/html").documentElement.querySelector("body");h.childNodes.forEach(function(e){ca(e)});e.innerHTML=h.innerHTML;y=e.getAttribute("style");h=x[f].fontSize?x[f].fontSize:e.style.fontSize;var n=x[f].fontFamily?x[f].fontFamily.replace(/\s+/g,
"").replace(/['"]+/g,""):e.style.fontFamily;f=x[f].color?x[f].color:null;y=y.replace(/(font:.*?;)/i,"font:normal normal "+h+" "+n+";");y=y.replace("Italic","");y=y.replace("underline:1;","underline:0;");y=y.replace("text-decoration: underline;","text-decoration: none;");f&&(y=y.replace(/(color:.*?;)/i,"color:"+f+";"));e.setAttribute("style",y)}else e.remove()});for(n=h.documentElement.querySelectorAll("p").length;n<w.length;n++){var z=document.createElement("p");z.setAttribute("id","0");var aa=(new DOMParser).parseFromString(w[n],
"text/html").documentElement.querySelector("body");aa.childNodes.forEach(function(e){ca(e)});z.innerHTML=aa.innerHTML;null!=y&&z.setAttribute("style",y);h.documentElement.querySelector("body").appendChild(z)}h=h.documentElement.querySelector("body").innerHTML;var ba="";nb[e].forEach(function(e){e.id===r&&(ba=e)});if(""===ba)return"";f="<DOC id='"+f.id+"' pagecount='"+f.pagecount+"'>";f=f+("<STORY galley_ids='"+r+"' pagenum='"+e+"'>")+("<galleys>"+ba.galleysContents+"</galleys>");ba.contents=h;f=f+
h+"\n</STORY>";return f+="</DOC>"}function na(e){return e.startsWith("rgb(")?"#"+e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"").split(",").map(function(e){return("00"+parseInt(e,10).toString(16)).slice(-2)}).join(""):e}function sa(e,f,h,n){var r=[],w=Ya.getDocument(),x=null;f.forEach(function(f){if(f instanceof ka){var y=w.hl(e,f.bbox.leftVal(),f.bbox.topVal());var z=y.x;var ba=y.y;var ca=w.hl(e,f.bbox.rightVal(),f.bbox.bottomVal());y=ca.x;ca=ca.y}else if(f instanceof aa)y=w.hl(e,f.galleyBox.leftVal(),
f.galleyBox.topVal()),z=y.x,ba=y.y,ca=w.hl(e,f.galleyBox.rightVal(),f.galleyBox.bottomVal()),y=ca.x,ca=ca.y;else return;var ea=new window.Core.Annotations.RectangleAnnotation,ha=va.a.OBJECT;f instanceof aa&&(ha=va.a.TEXT);ea.F3(f,ha);ea.PageNumber=f.pagenum;ea.X=z;ea.Y=ba;ea.Width=y-z;ea.Height=ca-ba;ea.StrokeColor=new Ia.a("#3183C8");ea.FillColor=new Ia.a(255,255,255,.01);ea.Style="dash";ea.Dashes="4,3";if(Pa||n)ea.NoView=!0,ea.Listable=!1;ea.du();ea.selectionModel=La.a;r.push(ea);"undefined"!==
typeof h&&h===f.id&&(x=ea)});f=Ya.pa();f.Ah(r);!x||Pa||n||f.Bg(x);f.Le(r)}function pa(e,f,h){return Object(Ea.b)(this,void 0,void 0,function(){var n,r,w,x,y,aa,ba,ca,ea,ha;return Object(Ea.d)(this,function(fa){switch(fa.label){case 0:n=e.data;w=n.cmd;switch(w){case "isReady":return[3,1];case "initialiseInfixServer":return[3,3];case "loadAvailableFonts":return[3,4];case "exportFile":return[3,5];case "insertNewTextBox":return[3,6];case "importText":return[3,7];case "transformObject":return[3,7];case "alignParagraph":return[3,
7];case "deleteObject":return[3,8];case "insertImage":return[3,9]}return[3,10];case 1:return[4,Object(Ja.b)()];case 2:return x=fa.ba(),Sa.postMessage({cmd:"initialiseInfixServer",l:x}),[3,10];case 3:return(y=Ca(n.resultsXML))?(f(),aa=Object(ya.c)()||"https://www.pdftron.com/webfonts/v2/",Sa.postMessage({cmd:"loadAvailableFonts",webFontURL:aa})):h("License key does not have content edit permission"),[3,10];case 4:return Fa(n.resultsXML),[3,10];case 5:return n.exportPerformed?qa(n.pageNumber,n.exportXML,
n.objectXML,n.resultsXML):(r=Wa[n.pageNumber],oa(n.pageNumber,r)),$a.resolve(),jb&&jb[n.pageNumber]&&jb[n.pageNumber].resolve(),[3,10];case 6:return ta(n.pageNumber,n.exportXML,n.contentHTML),r=Wa[n.pageNumber],z({xb:n.pageNumber,Dn:n.pdfBuffer,Kp:r,Ru:n.id}),[3,10];case 7:r=Wa[n.pageNumber];Ga(n.pageNumber,n.resultsXML);z({xb:n.pageNumber,Dn:n.pdfBuffer,Kp:r,Ru:n.id,x_:n.isSearchReplace});ba=n.isSearchReplace;ca=n.callbackMapId;if(ba&&ca&&Cb[ca])Cb[ca]();return[3,10];case 8:return r=Wa[n.pageNumber],
Ga(n.pageNumber,n.resultsXML),r.galleys=r.galleys.filter(function(e){return e.id!==n.id}),r.objects=r.objects.filter(function(e){return e.id!==n.id}),ea={xb:n.pageNumber,Dn:n.pdfBuffer,Kp:r},z(ea),[3,10];case 9:return r=Wa[n.pageNumber],Ga(n.pageNumber,n.resultsXML),ha={xb:n.pageNumber,Dn:n.pdfBuffer,Kp:r,Ru:n.isText,n_:!0},z(ha),[3,10];case 10:return[2]}})})}function Ca(e){e=new Uint8Array(e);var f=(new TextDecoder("utf-8")).decode(e);e=!1;f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("LicenseCheck");
null!==f&&0<f.length&&(f=f[0].getElementsByTagName("Status")[0].innerHTML,"error"!==f&&"ok"===f&&(e=!0));return e}function ta(e,f){f=(new TextDecoder("utf-8")).decode(f);f=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("STORY");var h=Array.prototype.slice.call(f)[0];f=h.getAttribute("galley_ids");var r=Array.prototype.slice.call(h.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new n(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;
var x=Array.prototype.slice.call(h.getElementsByTagName("galleys"))[0];x.parentNode.removeChild(x);h=ra(h.innerHTML).trim();f=new aa(f,e,r,h,w);h=Wa[e];w=h.galleys;w.push(f);h.galleys=w;Wa[e]=h;oa(e,h)}function oa(e,f){x(e,f.galleys);y(e,f.objects);ba(e);Aa(e,f)}function Aa(e,f,h,n){sa(e,f.objects,h,n);sa(e,f.galleys,h,n)}function qa(e,f,h,n){var r=new Uint8Array(f),w=new TextDecoder("utf-8");f=w.decode(r);r=new Uint8Array(h);h=w.decode(r);r=new Uint8Array(n);n=w.decode(r);Wa[e]=ua(e,f,h,n);oa(e,
Wa[e])}function za(e,f){e=parseFloat(e);return isNaN(f)||f<e?e:f}function ua(e,f,h,r){var w;var x=new DOMParser;r=x.parseFromString(r,"text/xml");Array.prototype.slice.call(r.getElementsByTagName("BBox")).forEach(function(e){if("CropBox"===e.getAttribute("Name")){var f=parseFloat(e.getElementsByTagName("Top").item(0).innerHTML),h=parseFloat(e.getElementsByTagName("Bottom").item(0).innerHTML),r=parseFloat(e.getElementsByTagName("Left").item(0).innerHTML);e=parseFloat(e.getElementsByTagName("Right").item(0).innerHTML);
w=new n(f,r,h,e)}});x=new DOMParser;r=x.parseFromString(f,"text/xml");var y=[];Array.prototype.slice.call(r.getElementsByTagName("STORY")).forEach(function(f){var h=f.getAttribute("galley_ids"),r=Array.prototype.slice.call(f.getElementsByTagName("g"))[0],w=r.getAttribute("bbox").split(" ");w=new n(parseFloat(w[0]),parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]));r=r.innerHTML;var x=Array.prototype.slice.call(f.getElementsByTagName("galleys"))[0];x.parentNode.removeChild(x);f=ra(f.innerHTML).trim();
h=new aa(h,e,r,f,w);y.push(h)});x=new DOMParser;var z=[];f=x.parseFromString(h,"text/xml").getElementsByTagName("Object");Array.prototype.slice.call(f).forEach(function(f){var h=f.getAttribute("Type"),r=f.getAttribute("OID");f=Array.prototype.slice.call(f.getElementsByTagName("Point"));var w=Number.NaN,x=Number.NaN,y=Number.NaN,aa=Number.NaN;f.forEach(function(e){var f=e.getAttribute("Name");"TL"===f?(w=za(e.getAttribute("Y"),w),y=za(e.getAttribute("X"),y)):"TR"===f?(w=za(e.getAttribute("Y"),w),aa=
za(e.getAttribute("X"),aa)):"BR"===f?(x=za(e.getAttribute("Y"),x),aa=za(e.getAttribute("X"),aa)):"BL"===f&&(x=za(e.getAttribute("Y"),x),y=za(e.getAttribute("X"),y))});z.push(new ka(h,r,new n(w,y,x,aa),e))});f=Array.prototype.slice.call(r.getElementsByTagName("DOC"))[0].getAttribute("id");return new la(f,1,w,y,z)}function ra(e){return(new DOMParser).parseFromString(e,"text/html").documentElement.querySelector("body").innerHTML}function Ga(e,f){var h;f=(new TextDecoder("utf-8")).decode(f);var r=(new DOMParser).parseFromString(f,
"text/xml");f=r.getElementsByTagName("Galley").item(0);if(null!=f){var w=f.getAttribute("id");f=r.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var w=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var x=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Right");e=parseFloat(f.item(0).innerHTML);h=new n(r,w,x,e)});nb[e].forEach(function(e){e.id===
w&&!0===h.zx(e.galleyBox)&&(e.galleyBox=h)})}f=r.getElementsByTagName("Object").item(0);if(null!=f){var x=f.getAttribute("OID");f=r.getElementsByTagName("BBox");f=Array.prototype.slice.call(f);f.forEach(function(e){var f=e.getElementsByTagName("Top"),r=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Left");var w=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Bottom");var x=parseFloat(f.item(0).innerHTML);f=e.getElementsByTagName("Right");e=parseFloat(f.item(0).innerHTML);h=new n(r,
w,x,e)});fb[e].forEach(function(e){e.id===x&&!0===h.zx(e.bbox)&&(e.bbox=h)})}f=r.getElementsByTagName("NewParas").item(0);if(null!=f){var y=f.getAttribute("id");nb[e].forEach(function(e){if(e.id===y){var f="<Contents>"+e.contents;f+="</Contents>";var h=Array.prototype.slice.call(r.getElementsByTagName("NewPara"));f=(new DOMParser).parseFromString(f,"text/xml");var n=Array.prototype.slice.call(f.getElementsByTagName("p"));h.forEach(function(e){var f=parseFloat(e.innerHTML),h=!1;n.forEach(function(e){var n=
e.getAttribute("id");!1===h&&"0"===n&&(e.setAttribute("id",f),h=!0)})});e.contents=f.getElementsByTagName("Contents").item(0).innerHTML}})}}function Da(e){return{regex:0!==(e&Qa.f.Zs),wildcard:0!==(e&Qa.f.pq),wholeWord:0!==(e&Qa.f.ct),caseSensitive:0!==(e&Qa.f.kq)}}function Fa(e){e=new Uint8Array(e);e=(new TextDecoder("utf-8")).decode(e);e=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Font");var f={};Array.prototype.slice.call(e).forEach(function(e){var h=e.getAttribute("Family");
h in f||(f[h]={});var n=[];Array.prototype.slice.call(e.getElementsByTagName("Variation")).forEach(function(e){e=e.innerHTML;n.push(e);if(e.includes("Regular")||e===h.replace(/\s+/g,""))f[h].hasRegular=!0;e.includes("Bold")&&(f[h].hasBold=!0);e.includes("Italic")&&(f[h].hasItalic=!0)});ab.push(new ma(h,n))});Gb=Object.keys(f).filter(function(e){return f[e].hasRegular&&f[e].hasBold&&f[e].hasItalic})}e.r(ea);var Ea=e(0),Ha=e(37),Ia=e(7),La=e(348),ya=e(40),Ja=e(69),Ba=e(3),va=e(108),Ka=e(38),Ma=e(6),
Ra=e(144),Qa=e(27),xa=e(9),Na=e(25),Sa=null,Ta=null,Pa=!1,Za=!1,nb={},fb={},Wa={},Ya,$a=window.createPromiseCapability(),jb=[],ab=[],Gb=[],Cb={};ea["default"]={L1:f,M1:h,HW:function(e){return Object(Ea.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z;return Object(Ea.d)(this,function(aa){switch(aa.label){case 0:return f=e.id,h=e.isText,n=e.pageNumber,r=Ya.getDocument(),[4,r.bd([n],void 0,!0)];case 1:return w=aa.ba(),x=new TextEncoder,y=x.encode(""),z=y.buffer,Sa.postMessage({cmd:"deleteObject",
pdfFile:w,pageNumber:n,objectID:f,isText:h,tableData:z},[z]),[2]}})})},q5:function(e){return Object(Ea.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ba,ca,ea,ha;return Object(Ea.d)(this,function(fa){switch(fa.label){case 0:return f=e.id,h=e.position,n=h.top,r=h.left,w=h.bottom,x=h.right,y=e.isText,z=e.pageNumber,aa=Ya.getDocument(),[4,aa.bd([z],void 0,!0)];case 1:return ba=fa.ba(),ca=new TextEncoder,ea=ca.encode(""),ha=ea.buffer,Sa.postMessage({cmd:"transformObject",pdfFile:ba,pageNumber:z,
objectID:f,isText:y,topVal:n,leftVal:r,bottomVal:w,rightVal:x,tableData:ha},[ha]),[2]}})})},WU:function(e,f){return Object(Ea.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y,z,aa,ba,ea,ha,fa,ia,ja,la;return Object(Ea.d)(this,function(ka){switch(ka.label){case 0:return h="<DOC><STORY><galleys></galleys>",n=[],r=(new DOMParser).parseFromString(f,"text/html"),r.documentElement.querySelectorAll("p").forEach(function(e,f){n[f]=e.innerHTML}),n.forEach(function(e,f){e=(new DOMParser).parseFromString(n[f],
"text/html").documentElement.querySelector("body");e.childNodes.forEach(function(e){ca(e)});h+="<p>"+e.innerHTML+"</p>"}),h+="</STORY></DOC>",w=e.pageNumber,x=Ya.getDocument(),y=e.position,z=y.top,aa=y.left,ba=y.bottom,ea=y.right,ha=e.defaultText,fa=e.font,ia=e.fontSize,ja=e.textColor,[4,x.bd([w],void 0,!0)];case 1:return la=ka.ba(),Sa.postMessage({cmd:"insertNewTextBox",pdfFile:la,pageNumber:w,topVal:z,leftVal:aa,bottomVal:ba,rightVal:ea,defaultText:ha,font:fa,fontSize:ia,textColor:ja,importData:h,
content:f}),[2]}})})},z5:w,qY:fa,n3:function(e){return Object(Ea.b)(this,void 0,void 0,function(){var n,r,x,y,z,aa,ba,ca,ea,ha,ia,ja,la,ka,oa,ma,na,pa,qa,Aa,za,sa,ua=this;return Object(Ea.d)(this,function(wa){switch(wa.label){case 0:n=e.replaceWith;r=e.documentViewer;x=e.search;y=e.searchResults;if(r){if(!y&&!x)throw Error('The "searchResults" parameter is missing in the options');if(void 0===n)throw Error('The "replaceWith" parameter should not be undefined');}else throw Error('The "documentViewer" parameter is missing in the options');
z=1===y.length;x?(aa=x.HK,ba=x.nR):(ca=Da(r.wy()),aa=ca.HK,ba=ca.nR);ea=null;ha=[];if(z)ea=y[0],ha=[ea.pageNum];else try{ha=Object.keys(y.reduce(function(e,f){e[f.pageNum]=f.pageNum;return e},{})).map(function(e){return Number(e)})}catch(ld){Object(Ba.i)(ld)}ia=0;if(ea)for(ja=r.Bj(),la=-1,ka=0,oa=ja.length;ka<oa&&(ma=ja[ka],ma.pageNum===la?ia++:(la=ma.pageNum,ia=0),!Object(Ra.a)(ma,ea));ka++);na=y[0].resultStr;pa=aa?"mg":"mgi";qa=ba?"\\b("+na+")\\b":"("+na+")";Aa=new RegExp("(?<!</?[^>]*|&[^;]*)"+
qa,pa);$a=window.createPromiseCapability();return Ta?[3,2]:[4,f(r.fp())];case 1:wa.ba(),wa.label=2;case 2:return Pa=!0,Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_STARTED),za=0,sa=ha.map(function(e){return Object(Ea.b)(ua,void 0,void 0,function(){var f,x=this;return Object(Ea.d)(this,function(){f=new Promise(function(f,aa){return Object(Ea.b)(x,void 0,void 0,function(){var x=this;return Object(Ea.d)(this,function(ba){switch(ba.label){case 0:return jb[e]=window.createPromiseCapability(),[4,h(r.getDocument(),
e,!0)];case 1:return ba.ba(),jb[e].promise.then(function(){return Object(Ea.b)(x,void 0,void 0,function(){function h(e,h){return Object(Ea.b)(this,void 0,void 0,function(){var n,r;return Object(Ea.d)(this,function(x){switch(x.label){case 0:n=Object(Na.f)(),Cb[n]=function(){delete Cb[n];f(!0);Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_TEXT_REPLACED)},x.label=1;case 1:return x.Qe.push([1,3,,4]),[4,w(e,h,!0,n)];case 2:return x.ba(),[3,4];case 3:return r=x.ba(),Object(Ba.i)(r),aa(r),[3,4];case 4:return[2]}})})}
var r,x,ba,ca,ha,ja,la,ka,oa,ma,pa,qa,sa,ua,wa,ra,Ha;return Object(Ea.d)(this,function(){r=Ya.pa();x=r.mb().filter(function(f){return f.PageNumber===e}).filter(function(e){return e.Ld()}).concat();ba=[];ha=ca=0;for(ja=x.length;ha<ja;ha++){la=x[ha];ka=la.Mc;oa=fa(ka);ma=[];try{for(pa=void 0;null!==(pa=Aa.exec(oa));)ma.push(pa),ba.push(y[za]),za++}catch(xd){Object(Ba.i)(xd)}if(ma.length)if(ca+=ma.length,z&&ca>ia){qa=Math.abs(ca-ma.length-ia);sa=ma[qa].index;ua=oa.substr(0,sa);wa=n;ra=oa.substr(sa+na.length,
oa.length);Ha=""+ua+wa+ra;Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_TEXT_FOUND,[[ea]]);h(la,Ha);break}else z||(Za=!0,Ha=oa.replace(Aa,n),Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_TEXT_FOUND,[ba]),h(la,Ha))}return[2]})})}).catch(aa),[2]}})})});return[2,f]})})}),[2,Promise.all(sa).then(function(){z&&ea?setTimeout(function(){var e=[];r.lw(y[0].resultStr,r.wy(),{startPage:ha[0],endPage:ha[0],fullSearch:!0,onDocumentEnd:function(){Za=Pa=!1;Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_ENDED);r.YH(ha[0]-1,e)},onResult:function(f){f.resultCode===
Qa.e.am&&e.push(f)}})},200):(r.OK(),r.Dl(),r.Yd(),Za=Pa=!1,Ka.a.trigger(xa.e.SEARCH_AND_REPLACE_ENDED));var e=Ya.pa(),f=e.mb().filter(function(e){return e.Ld()});e.Ye(f,{force:!0,source:"contentEditTool"})})]}})})},G3:function(e,f){var h=ia(e.Mc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontFamily=f});h=r.serializeToString(h);w(e,h)},H3:function(e,f){var h=ia(e.Mc.contents);
h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.fontSize=f});h=r.serializeToString(h);w(e,h)},dV:function(e,f){return Object(Ea.b)(void 0,void 0,void 0,function(){var h,n,r,w,x,y,z;return Object(Ea.d)(this,function(aa){switch(aa.label){case 0:return h=e.Mc.id,n=e.PageNumber,r=Ya.getDocument(),[4,r.bd([n],void 0,!0)];case 1:return w=aa.ba(),x=new TextEncoder,y=x.encode(""),z=y.buffer,
Sa.postMessage({cmd:"AlignParaText",pdfFile:w,pageNumber:n,galleyID:h,alignment:f,topVal1:"",leftVal1:"",bottomVal1:"",rightVal1:"",topVal2:"",leftVal2:"",bottomVal2:"",rightVal2:"",tableData:z},[z]),[2]}})})},DV:function(e){var f=ia(e.Mc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r="bold"===h[0].style.fontWeight,x=n.serializeToString(h[0]).includes("<strong>");h.forEach(function(e){if(r||x){e.style.fontWeight=
"normal";var f=n.serializeToString(e).replace(/<strong>/g,"");f=f.replace(/<\/strong>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.fontWeight="bold",e.innerHTML="<strong>"+e.innerHTML.trim()+"</strong>"});f=n.serializeToString(f);w(e,f)},I_:function(e){var f=ia(e.Mc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,
r="italic"===h[0].style.fontStyle,x=n.serializeToString(h[0]).includes("<em>");h.forEach(function(e){if(r||x){e.style.fontStyle="normal";e.style.font.includes("Italic")&&(e.style.font=e.style.font.replace("Italic",""));var f=n.serializeToString(e).replace(/<em>/g,"");f=f.replace(/<\/em>/g,"");f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.fontStyle="italic",e.innerHTML="<em>"+e.innerHTML.trim()+"</em>"});f=n.serializeToString(f);
w(e,f)},s5:function(e){var f=ia(e.Mc.contents);f=(new DOMParser).parseFromString(f,"text/html").documentElement.querySelector("body");var h=f.querySelectorAll("p"),n=new XMLSerializer,r=h[0].style.textDecoration.includes("underline")||h[0].style.textDecoration.includes("word"),x=n.serializeToString(h[0]).includes("<u>");h.forEach(function(e){if(r||x){e.style.textDecoration=e.style.textDecoration.replace("underline","");var f=n.serializeToString(e).replace(/<u>/g,"");f=f.replace(/<\/u>/g,"");f=(new DOMParser).parseFromString(f,
"text/html").documentElement.querySelector("p");e.parentElement.replaceChild(f,e)}else e.style.textDecoration.includes("none")?e.style.textDecoration=e.style.textDecoration.replace("none","underline"):e.style.textDecoration+=" underline",e.innerHTML="<u>"+e.innerHTML.trim()+"</u>"});f=n.serializeToString(f);w(e,f)},f4:function(e,f){var h=ia(e.Mc.contents);h=(new DOMParser).parseFromString(h,"text/html").documentElement.querySelector("body");var n=h.querySelectorAll("p"),r=new XMLSerializer;n.forEach(function(e){e.style.color=
f});h.querySelectorAll("span").forEach(function(e){e.setAttribute("style","color:"+f)});h=r.serializeToString(h);w(e,h)},fY:function(){return Gb},VU:function(e){return Object(Ea.b)(void 0,void 0,void 0,function(){var f,h,n,r,w,x,y,z,aa,ba;return Object(Ea.d)(this,function(ca){switch(ca.label){case 0:return f=e.pageNumber,h=e.newImage,n=e.scaleType,r=e.position,w=r.top,x=r.left,y=r.bottom,z=r.right,aa=Ya.getDocument(),[4,aa.bd([f],void 0,!0)];case 1:return ba=ca.ba(),Sa.postMessage({cmd:"insertImage",
pdfFile:ba,pageNumber:f,newImage:h,scaleType:n,topVal:w,leftVal:x,bottomVal:y,rightVal:z},[]),[2]}})})}}}}]);}).call(this || window)
