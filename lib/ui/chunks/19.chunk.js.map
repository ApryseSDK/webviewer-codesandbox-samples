{"version":3,"sources":["webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss?5a25","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.scss","webpack:///./src/ui/src/components/ListSeparator/ListSeparator.js","webpack:///./src/ui/src/components/ListSeparator/index.js","webpack:///./src/ui/src/components/SearchResult/SearchResult.scss?4533","webpack:///./src/ui/src/components/SearchResult/SearchResult.scss","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlay.scss?bc7a","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlay.scss","webpack:///./src/ui/src/components/SearchPanel/SearchPanel.scss?80b6","webpack:///./src/ui/src/components/SearchPanel/SearchPanel.scss","webpack:///./src/ui/src/components/SearchResult/SearchResult.js","webpack:///./src/ui/src/components/SearchResult/index.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlay.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlayContainer.js","webpack:///./src/ui/src/components/SearchOverlay/SearchOverlayRedux.js","webpack:///./src/ui/src/components/SearchOverlay/index.js","webpack:///./src/ui/src/hooks/useSearch.js","webpack:///./src/ui/src/components/SearchPanel/SearchPanel.js","webpack:///./src/ui/src/components/SearchPanel/SearchPanelContainer.js","webpack:///./src/ui/src/components/SearchPanel/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","webComponents","document","getElementsByTagName","length","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","forEach","styleNode","innerHTML","cloneNode","push","head","exports","locals","propTypes","renderContent","PropTypes","func","children","node","ListSeparator","props","className","React","memo","SearchResultListSeparatorPropTypes","currentResultIndex","number","isRequired","searchResults","arrayOf","object","t","pageLabels","any","isProcessingSearchResults","bool","SearchResultListSeparator","previousIndex","currentListItem","previousListItem","isFirstListItem","isInDifferentPage","pageNum","listSeparatorText","role","SearchResultListItemPropTypes","result","activeResultIndex","onSearchResultClick","activeDocumentViewerKey","SearchResultListItem","ambientStr","resultStrStart","resultStrEnd","resultStr","textBeforeSearchValue","slice","searchValue","textAfterSearchValue","onClick","SearchResultPropTypes","width","height","searchStatus","oneOf","onClickResult","SearchResult","isSearchInProgress","cellMeasureCache","useMemo","CellMeasurerCache","defaultHeight","fixedWidth","listRef","useRef","useState","listSize","setListSize","clearAll","rowRenderer","useCallback","rendererOptions","index","key","parent","style","cache","columnIndex","rowIndex","registerChild","ref","useEffect","current","scrollToRow","tabIndex","overscanRowCount","rowCount","deferredMeasurementCache","rowHeight","scrollToIndex","SearchResultWithContentRectHOC","measureRef","contentRect","rest","bounds","oneOfType","shape","withContentRect","isPanelOpen","isSearchOverlayDisabled","string","isCaseSensitive","isWholeWord","isWildcard","setSearchValue","setCaseSensitive","setSearchStatus","setWholeWord","setWildcard","executeSearch","selectNextResult","selectPreviousResult","SearchOverlay","useTranslation","replaceValue","nextResultValue","setReplaceValue","setIsSearchInProgress","isReplaceBtnDisabled","setReplaceBtnDisabled","isReplaceAllBtnDisabled","setReplaceAllBtnDisabled","isMoreOptionsOpen","setMoreOptionOpen","showReplaceSpinner","setShowReplaceSpinner","isReplacementRegexValid","setReplacementRegexValid","isSearchAndReplaceDisabled","useSelector","state","selectors","isElementDisabled","searchTextInputRef","RegExp","error","setTimeout","focus","console","warn","caseSensitive","wholeWord","wildcard","clearSearchResult","core","addEventListener","onPagesUpdated","removeEventListener","search","isOfficeEditorMode","getDocument","getOfficeEditor","updateSearchData","debouncedSearch","debounce","throttleSearch","throttle","onOfficeDocumentEdited","clearSearchResults","caseSensitiveSearchOptionOnChange","event","isChecked","target","checked","wholeWordSearchOptionOnChange","wildcardOptionOnChange","nextButtonOnClick","previousButtonOnClick","searchAndReplaceAll","getInstanceNode","instance","Core","ContentEdit","searchAndReplaceText","documentViewer","getPageSearchResults","replaceWith","toggleMoreOptionsBtn","window","localStorage","setItem","searchAndReplaceOne","getActiveSearchResult","dispatch","useDispatch","numberOfResultsFound","showSpinner","Spinner","searchOptionsComponents","Choice","dataElement","id","onChange","label","type","autoComplete","value","placeholder","aria-label","undefined","Icon","glyph","data-element","disabled","title","confirmationWarning","message","confirmBtnText","onConfirm","actions","showWarningMessage","store","searchOptions","regex","overrideSearchExecution","getOverrideSearchExecution","searchTextFullFactory","searchTextFull","nextResultIndex","setActiveSearchResult","nextIndex","setNextResultValue","prevResultIndex","SearchOverlayContainer","useStore","mapDispatchToProps","closeElements","connect","DataElements","SEARCH_OVERLAY","getSearchValue","getReplaceValue","getNextResultValue","useSearch","setSearchResults","activeSearchResult","activeSearchResultIndex","setActiveSearchResultIndex","documentViewersCount","getDocumentViewers","coreSearchResults","getDocumentViewer","newActiveSearchResultIndex","findIndex","searchResult","isSearchResultEqual","activeDocumentViewer","activeSearchResultChanged","newActiveSearchResult","searchResultsChanged","newSearchResults","searchInProgressEventHandler","isSearching","defaultActiveSearchResult","documentViewers","isOpen","isMobile","array","currentWidth","closeSearchPanel","setActiveResult","isInDesktopOnlyMode","noop","SearchPanel","onCloseButtonClick","resultIndex","searchEventListener","addSearchListener","removeSearchListener","getClassName","minWidth","DataElementWrapper","SearchPanelContainer","isMobileSize","isElementOpen","SEARCH_PANEL","getSearchPanelWidth","getPageLabels","shouldClearSearchPanelOnClose","getActiveDocumentViewerKey","shallowEqual","clearSearchInputValue","combinedProps"],"mappings":"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","file":"chunks/19.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ListSeparator.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.ListSeparator{margin-top:16px;margin-bottom:8px;font-family:Lato;font-weight:500;color:var(--list-separator-color);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './ListSeparator.scss';\r\n\r\nconst propTypes = {\r\n  renderContent: PropTypes.func,\r\n  children: PropTypes.node,\r\n};\r\n\r\nconst ListSeparator = (function(props) {\r\n  const content = props.renderContent ? props.renderContent() : props.children;\r\n  return <div className=\"ListSeparator\">{content}</div>;\r\n});\r\n\r\nListSeparator.propTypes = propTypes;\r\n\r\nexport default React.memo(ListSeparator);\r\n","import ListSeparator from './ListSeparator';\r\n\r\nexport default ListSeparator;","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./SearchResult.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.SearchResult{background-color:transparent;border:1px solid transparent;display:block;width:calc(100% - 4px);text-align:left;cursor:pointer;border-radius:4px;box-shadow:0 0 3px 0 var(--box-shadow);padding:10px 12px;margin-left:2px;margin-bottom:8px;background:var(--component-background);word-break:break-all}:host(:not([data-tabbing=true])) .SearchResult,html:not([data-tabbing=true]) .SearchResult{outline:none}.SearchResult.selected{border:1px solid var(--focus-border);box-shadow:none}.SearchResult .search-value{background:var(--yellow-1);word-break:break-all}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./SearchOverlay.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.SearchOverlay{position:static;display:flex;flex-direction:column;padding-right:8px;flex-wrap:nowrap;border:0;border-radius:0;background:transparent;visibility:visible!important;flex-grow:0}.SearchOverlay .input-container{position:relative;box-sizing:border-box;border:1px solid var(--border);border-radius:4px;height:28px;display:flex;align-items:center;justify-content:flex-end;color:var(--text-color);padding:6px 2px 6px 6px;background:var(--component-background)}.SearchOverlay .input-container input{width:100%;padding-right:26px;height:20px;border:none;background:transparent}.SearchOverlay .input-container input::-moz-placeholder{color:var(--placeholder-text)}.SearchOverlay .input-container input:-ms-input-placeholder{color:var(--placeholder-text)}.SearchOverlay .input-container input::placeholder{color:var(--placeholder-text)}.SearchOverlay .input-container .clearSearch-button{padding:0;border:none;background-color:transparent;cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;position:absolute;width:24px;height:24px}:host(:not([data-tabbing=true])) .SearchOverlay .input-container .clearSearch-button,html:not([data-tabbing=true]) .SearchOverlay .input-container .clearSearch-button{outline:none}.SearchOverlay .input-container .clearSearch-button svg{color:var(--gray-7)}.SearchOverlay .input-container .clearSearch-button:hover{background:var(--blue-1)}.SearchOverlay .divider{height:1px;width:100%;background:var(--divider);margin:10px 0}.SearchOverlay .options{display:flex;flex-wrap:wrap;margin-top:8px}.SearchOverlay .options>span{margin-right:8px}.SearchOverlay .options>span>label{white-space:nowrap}.SearchOverlay .replace-options .replace-buttons{display:flex;flex-direction:row;justify-content:flex-end;padding-top:10px}.SearchOverlay .replace-options .replace-buttons .spinner{margin:0;position:absolute;left:30px}.SearchOverlay .replace-options .replace-buttons .btn-replace{display:flex;justify-content:center;align-items:center;background-color:var(--blue-5);border:1px solid var(--blue-5);color:var(--gray-0);padding:6px 18px;width:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border-radius:4px;height:28px;cursor:pointer}.SearchOverlay .replace-options .replace-buttons .btn-replace:disabled{opacity:.5}.SearchOverlay .replace-options .replace-buttons .btn-replace-all{display:flex;justify-content:center;align-items:center;color:var(--blue-5);padding:6px 18px;width:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:28px;cursor:pointer;margin-right:5px}.SearchOverlay .replace-options .replace-buttons .btn-replace-all:disabled{opacity:.5}.SearchOverlay .extra-options{margin-top:5px}.SearchOverlay .extra-options button.Button{display:flex;justify-content:center;align-items:center;color:var(--blue-5);width:auto;cursor:pointer;margin-right:5px;font-weight:500;height:25px}.SearchOverlay .extra-options button.Button .Icon{color:var(--blue-5);width:14px;margin-top:10px;margin-left:6px}.SearchOverlay .footer{display:flex;align-items:center;justify-content:space-between;color:var(--faded-text);margin-bottom:16px}.SearchOverlay .footer .spinner{height:25px!important;width:25px!important;margin:0}.SearchOverlay .footer .buttons{display:flex;flex-direction:row;align-self:flex-end;justify-content:space-evenly;margin-left:auto;width:64px;height:28px}.SearchOverlay .footer .buttons .button{padding:0;border:none;background-color:transparent;width:28px;height:28px;border-radius:4px;display:flex;align-items:center;justify-content:center;cursor:pointer}:host(:not([data-tabbing=true])) .SearchOverlay .footer .buttons .button,html:not([data-tabbing=true]) .SearchOverlay .footer .buttons .button{outline:none}.SearchOverlay .footer .buttons .button svg{color:var(--gray-7)}.SearchOverlay .footer .buttons .button:hover{background-color:var(--blue-1)}.SearchOverlay .footer .buttons .arrow{width:18px;height:18px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./SearchPanel.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.search-panel-container{z-index:65;flex-direction:column;background-color:var(--panel-background);display:flex;flex-direction:row;position:relative;overflow:hidden}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .search-panel-container{z-index:95}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .search-panel-container{z-index:95}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .search-panel-container{border-left:1px solid var(--side-panel-border)}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .search-panel-container{border-left:1px solid var(--side-panel-border)}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .search-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .search-panel-container{position:fixed;top:0;right:0;height:100%;width:100%}}.SearchPanel{padding:16px 8px 0 16px;display:flex;flex-direction:column}.SearchPanel .ListSeparator:first-child{margin-top:0}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.SearchPanel .ReactVirtualized__Grid__innerScrollContainer{max-width:1000px!important}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel{width:100%;min-width:100%;padding-top:0}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel .close-container{display:flex;align-items:center;justify-content:flex-end;height:64px;width:100%;padding-right:12px}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel .close-container .close-icon-container{padding:0;border:none;background-color:transparent;cursor:pointer}:host(:not([data-tabbing=true])) .App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel .close-container .close-icon-container,html:not([data-tabbing=true]) .App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel .close-container .close-icon-container{outline:none}.App:not(.is-in-desktop-only-mode):not(.is-web-component) .SearchPanel .close-container .close-icon-container .close-icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel{width:100%;min-width:100%;padding-top:0}.App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel .close-container{display:flex;align-items:center;justify-content:flex-end;height:64px;width:100%;padding-right:12px}.App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel .close-container .close-icon-container{padding:0;border:none;background-color:transparent;cursor:pointer}:host(:not([data-tabbing=true])) .App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel .close-container .close-icon-container,html:not([data-tabbing=true]) .App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel .close-container .close-icon-container{outline:none}.App.is-web-component:not(.is-in-desktop-only-mode) .SearchPanel .close-container .close-icon-container .close-icon{width:24px;height:24px}}.SearchPanel .results{overflow-y:auto;overflow-y:overlay;flex:1}.SearchPanel .results.wild-card-visible{margin-top:110px!important}.SearchPanel .results .ReactVirtualized__List{overflow:overlay!important;padding-right:8px;width:auto!important}.SearchPanel .results .ReactVirtualized__List:focus{outline:none}.SearchPanel .results .ReactVirtualized__List .ReactVirtualized__Grid__innerScrollContainer{max-width:unset!important}.SearchPanel .loader-wrapper{display:flex;padding:10px;justify-content:center}.SearchPanel .info{padding:15px 0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\r\nimport { withContentRect } from 'react-measure';\r\nimport PropTypes from 'prop-types';\r\nimport './SearchResult.scss';\r\nimport VirtualizedList from 'react-virtualized/dist/commonjs/List';\r\nimport CellMeasurer, { CellMeasurerCache } from 'react-virtualized/dist/commonjs/CellMeasurer';\r\nimport ListSeparator from 'components/ListSeparator';\r\n\r\nconst SearchResultListSeparatorPropTypes = {\r\n  currentResultIndex: PropTypes.number.isRequired,\r\n  searchResults: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  t: PropTypes.func.isRequired,\r\n  pageLabels: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n  isProcessingSearchResults: PropTypes.bool\r\n};\r\n\r\nfunction SearchResultListSeparator(props) {\r\n  const { currentResultIndex, searchResults, t, pageLabels } = props;\r\n\r\n  const previousIndex = currentResultIndex === 0 ? currentResultIndex : currentResultIndex - 1;\r\n  const currentListItem = searchResults[currentResultIndex];\r\n  const previousListItem = searchResults[previousIndex];\r\n\r\n  const isFirstListItem = previousListItem === currentListItem;\r\n  const isInDifferentPage = previousListItem.pageNum !== currentListItem.pageNum;\r\n\r\n  if (isFirstListItem || isInDifferentPage) {\r\n    const listSeparatorText = `${t('option.shared.page')} ${pageLabels[currentListItem.pageNum - 1]}`;\r\n    return (\r\n      <div role=\"cell\">\r\n        <ListSeparator>{listSeparatorText}</ListSeparator>\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nSearchResultListSeparator.propTypes = SearchResultListSeparatorPropTypes;\r\n\r\nconst SearchResultListItemPropTypes = {\r\n  result: PropTypes.object.isRequired,\r\n  currentResultIndex: PropTypes.number.isRequired,\r\n  activeResultIndex: PropTypes.number.isRequired,\r\n  onSearchResultClick: PropTypes.func,\r\n  activeDocumentViewerKey: PropTypes.number\r\n};\r\n\r\nfunction SearchResultListItem(props) {\r\n  const { result, currentResultIndex, activeResultIndex, onSearchResultClick, activeDocumentViewerKey } = props;\r\n  const { ambientStr, resultStrStart, resultStrEnd, resultStr } = result;\r\n  const textBeforeSearchValue = ambientStr.slice(0, resultStrStart);\r\n  const searchValue = ambientStr === '' ? resultStr : ambientStr.slice(resultStrStart, resultStrEnd);\r\n  const textAfterSearchValue = ambientStr.slice(resultStrEnd);\r\n  return (\r\n    <button\r\n      role=\"cell\"\r\n      className={`SearchResult ${currentResultIndex === activeResultIndex ? 'selected' : ''}`}\r\n      onClick={() => {\r\n        if (onSearchResultClick) {\r\n          onSearchResultClick(currentResultIndex, result, activeDocumentViewerKey);\r\n        }\r\n      }}\r\n    >\r\n      {textBeforeSearchValue}\r\n      <span className=\"search-value\">{searchValue}</span>\r\n      {textAfterSearchValue}\r\n    </button>\r\n  );\r\n}\r\nSearchResultListItem.propTypes = SearchResultListItemPropTypes;\r\n\r\nconst SearchResultPropTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  activeResultIndex: PropTypes.number,\r\n  searchStatus: PropTypes.oneOf(['SEARCH_NOT_INITIATED', 'SEARCH_IN_PROGRESS', 'SEARCH_DONE']),\r\n  searchResults: PropTypes.arrayOf(PropTypes.object),\r\n  t: PropTypes.func.isRequired,\r\n  onClickResult: PropTypes.func,\r\n  pageLabels: PropTypes.arrayOf(PropTypes.any),\r\n  activeDocumentViewerKey: PropTypes.number\r\n};\r\n\r\nfunction SearchResult(props) {\r\n  const { height, searchStatus, searchResults, activeResultIndex, t, onClickResult, pageLabels, isProcessingSearchResults, isSearchInProgress, activeDocumentViewerKey } = props;\r\n  const cellMeasureCache = React.useMemo(() => {\r\n    return new CellMeasurerCache({ defaultHeight: 50, fixedWidth: true });\r\n  }, []);\r\n  const listRef = React.useRef(null);\r\n  const [listSize, setListSize] = React.useState(0);\r\n\r\n  if (searchResults.length === 0) {\r\n    // clear measure cache, when doing a new search\r\n    cellMeasureCache.clearAll();\r\n  }\r\n\r\n  if (searchResults.length && searchResults.length !== listSize) {\r\n    // If the search list is mutated in the backend, we\r\n    // need to clear cache and recalculate heights\r\n    setListSize(searchResults.length);\r\n    cellMeasureCache.clearAll();\r\n  }\r\n\r\n  const rowRenderer = React.useCallback(function rowRendererCallback(rendererOptions) {\r\n    const { index, key, parent, style } = rendererOptions;\r\n    const result = searchResults[index];\r\n    return (\r\n      <CellMeasurer\r\n        cache={cellMeasureCache}\r\n        columnIndex={0}\r\n        key={key}\r\n        parent={parent}\r\n        rowIndex={index}\r\n      >\r\n        {({ registerChild }) => (\r\n          <div role=\"row\" ref={registerChild} style={style}>\r\n            <SearchResultListSeparator\r\n              currentResultIndex={index}\r\n              searchResults={searchResults}\r\n              pageLabels={pageLabels}\r\n              t={t}\r\n            />\r\n            <SearchResultListItem\r\n              result={result}\r\n              currentResultIndex={index}\r\n              activeResultIndex={activeResultIndex}\r\n              onSearchResultClick={onClickResult}\r\n              activeDocumentViewerKey={activeDocumentViewerKey}\r\n            />\r\n          </div>\r\n        )}\r\n      </CellMeasurer>\r\n    );\r\n  }, [cellMeasureCache, searchResults, activeResultIndex, t, pageLabels]);\r\n\r\n  React.useEffect(() => {\r\n    if (listRef) {\r\n      listRef.current?.scrollToRow(activeResultIndex);\r\n    }\r\n  }, [activeResultIndex]);\r\n\r\n  if (height == null) { // eslint-disable-line eqeqeq\r\n    // VirtualizedList requires width and height of the component which is calculated by withContentRect HOC.\r\n    // On first render when HOC haven't yet set these values, both are undefined, thus having this check here\r\n    // and skip rendering if values are missing\r\n    return null;\r\n  }\r\n\r\n  if (searchStatus === 'SEARCH_DONE'\r\n    && searchResults.length === 0\r\n    && !isProcessingSearchResults) {\r\n    if (isSearchInProgress) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"info\">{t('message.noResults')}</div>\r\n    );\r\n  }\r\n\r\n\r\n  return (\r\n    <VirtualizedList\r\n      width={200}\r\n      height={height}\r\n      tabIndex={-1}\r\n      overscanRowCount={10}\r\n      rowCount={searchResults.length}\r\n      deferredMeasurementCache={cellMeasureCache}\r\n      rowHeight={cellMeasureCache.rowHeight}\r\n      rowRenderer={rowRenderer}\r\n      ref={listRef}\r\n      scrollToIndex={activeResultIndex - 1}\r\n    />\r\n  );\r\n}\r\nSearchResult.propTypes = SearchResultPropTypes;\r\n\r\nfunction SearchResultWithContentRectHOC(props) {\r\n  const { measureRef, contentRect, ...rest } = props;\r\n  const { height } = contentRect.bounds;\r\n  return (\r\n    <div className=\"results\" ref={measureRef}>\r\n      <SearchResult height={height} {...rest} />\r\n    </div>\r\n  );\r\n}\r\nSearchResultWithContentRectHOC.propTypes = {\r\n  contentRect: PropTypes.object,\r\n  measureRef: PropTypes.oneOfType([\r\n    PropTypes.func,\r\n    PropTypes.shape({ current: PropTypes.any })\r\n  ])\r\n};\r\n\r\nexport default withContentRect('bounds')(SearchResultWithContentRectHOC);\r\n","import SearchResult from './SearchResult';\r\n\r\nexport default SearchResult;\r\n","import React, { useEffect, useCallback, useRef, } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport core from 'core';\r\nimport { useTranslation } from 'react-i18next';\r\nimport debounce from 'lodash.debounce';\r\nimport throttle from 'lodash/throttle';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\n\r\nimport Icon from 'components/Icon';\r\nimport Choice from '../Choice/Choice';\r\nimport Spinner from '../Spinner';\r\nimport { getInstanceNode } from 'helpers/getRootNode';\r\nimport { isOfficeEditorMode } from 'helpers/officeEditor';\r\nimport './SearchOverlay.scss';\r\n\r\nconst propTypes = {\r\n  isPanelOpen: PropTypes.bool,\r\n  isSearchOverlayDisabled: PropTypes.bool,\r\n  searchValue: PropTypes.string,\r\n  searchStatus: PropTypes.oneOf(['SEARCH_NOT_INITIATED', 'SEARCH_IN_PROGRESS', 'SEARCH_DONE']),\r\n  isCaseSensitive: PropTypes.bool,\r\n  isWholeWord: PropTypes.bool,\r\n  isWildcard: PropTypes.bool,\r\n  searchResults: PropTypes.arrayOf(PropTypes.object),\r\n  activeResultIndex: PropTypes.number,\r\n  setSearchValue: PropTypes.func.isRequired,\r\n  setCaseSensitive: PropTypes.func.isRequired,\r\n  setSearchStatus: PropTypes.func.isRequired,\r\n  setWholeWord: PropTypes.func.isRequired,\r\n  setWildcard: PropTypes.func.isRequired,\r\n  executeSearch: PropTypes.func.isRequired,\r\n  selectNextResult: PropTypes.func,\r\n  selectPreviousResult: PropTypes.func,\r\n  isProcessingSearchResults: PropTypes.bool,\r\n  activeDocumentViewerKey: PropTypes.number,\r\n};\r\n\r\nfunction SearchOverlay(props) {\r\n  const { t } = useTranslation();\r\n  const { isSearchOverlayDisabled, searchResults, activeResultIndex, selectNextResult, selectPreviousResult, isProcessingSearchResults, activeDocumentViewerKey } = props;\r\n  const { searchValue, setSearchValue, executeSearch, replaceValue, nextResultValue, setReplaceValue } = props;\r\n  const { isCaseSensitive, setCaseSensitive, isWholeWord, setWholeWord, isWildcard, setWildcard, setSearchStatus, isSearchInProgress, setIsSearchInProgress } = props;\r\n  const { searchStatus, isPanelOpen } = props;\r\n  const [isReplaceBtnDisabled, setReplaceBtnDisabled] = React.useState(true);\r\n  const [isReplaceAllBtnDisabled, setReplaceAllBtnDisabled] = React.useState(true);\r\n  const [isMoreOptionsOpen, setMoreOptionOpen] = React.useState(true);\r\n  const [showReplaceSpinner, setShowReplaceSpinner] = React.useState(false);\r\n  const [isReplacementRegexValid, setReplacementRegexValid] = React.useState(true);\r\n  const isSearchAndReplaceDisabled = useSelector((state) => selectors.isElementDisabled(state, 'searchAndReplace'));\r\n  const searchTextInputRef = useRef();\r\n  const waitTime = 300; // Wait time in milliseconds\r\n\r\n  useEffect(() => {\r\n    try {\r\n      // eslint-disable-next-line no-unused-vars\r\n      const replacementRegex = new RegExp('(?<!<\\/?[^>]*|&[^;]*)');\r\n    } catch (error) {\r\n      setReplacementRegexValid(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (searchTextInputRef.current && isPanelOpen) {\r\n      // give time for the search panel to open before focusing on the input\r\n      setTimeout(() => {\r\n        searchTextInputRef.current.focus();\r\n      }, waitTime);\r\n    }\r\n\r\n    if (isSearchAndReplaceDisabled && isPanelOpen) {\r\n      console.warn('Search and Replace is not supported in this browser');\r\n    }\r\n  }, [isPanelOpen]);\r\n\r\n  useEffect(() => {\r\n    if (searchValue && searchValue.length > 0) {\r\n      executeSearch(searchValue, {\r\n        caseSensitive: isCaseSensitive,\r\n        wholeWord: isWholeWord,\r\n        wildcard: isWildcard,\r\n      });\r\n    } else {\r\n      clearSearchResult();\r\n    }\r\n  }, [isCaseSensitive, isWholeWord, isWildcard, activeDocumentViewerKey]);\r\n\r\n  useEffect(() => {\r\n    core.addEventListener('pagesUpdated', onPagesUpdated);\r\n    return () => {\r\n      core.removeEventListener('pagesUpdated', onPagesUpdated);\r\n    };\r\n  });\r\n\r\n  const onPagesUpdated = () => {\r\n    search(searchValue);\r\n  };\r\n\r\n  const search = async (searchValue) => {\r\n    if (searchValue && searchValue.length > 1) {\r\n      setIsSearchInProgress(true);\r\n      setSearchStatus('SEARCH_IN_PROGRESS');\r\n\r\n      if (isOfficeEditorMode()) {\r\n        await core.getDocument().getOfficeEditor().updateSearchData();\r\n      }\r\n      executeSearch(searchValue, {\r\n        caseSensitive: isCaseSensitive,\r\n        wholeWord: isWholeWord,\r\n        wildcard: isWildcard,\r\n      });\r\n    } else if (!searchValue) {\r\n      clearSearchResult();\r\n    }\r\n  };\r\n\r\n  const debouncedSearch = useCallback(\r\n    debounce(search, waitTime),\r\n    [isCaseSensitive, isWholeWord, isWildcard]\r\n  );\r\n\r\n  const throttleSearch = useCallback(\r\n    throttle(search, waitTime),\r\n    [isCaseSensitive, isWholeWord, isWildcard]\r\n  );\r\n\r\n  useEffect(() => {\r\n    const onOfficeDocumentEdited = () => {\r\n      if (searchValue && searchValue.length > 0) {\r\n        throttleSearch(searchValue);\r\n      }\r\n    };\r\n\r\n    core.getDocument()?.addEventListener('officeDocumentEdited', onOfficeDocumentEdited);\r\n\r\n    return () => {\r\n      core.getDocument()?.removeEventListener('officeDocumentEdited', onOfficeDocumentEdited);\r\n    };\r\n  }, [searchValue]);\r\n\r\n  const textInputOnChange = (event) => {\r\n    setSearchValue(event.target.value);\r\n    debouncedSearch(event.target.value);\r\n\r\n    if (event.target.value && replaceValue) {\r\n      setReplaceBtnDisabled(false);\r\n      setReplaceAllBtnDisabled(false);\r\n    }\r\n  };\r\n\r\n  const replaceTextInputOnChange = (event) => {\r\n    setReplaceValue(event.target.value);\r\n    if (event.target.value && searchValue) {\r\n      setReplaceBtnDisabled(false);\r\n      setReplaceAllBtnDisabled(false);\r\n    }\r\n  };\r\n\r\n  function clearSearchResult() {\r\n    core.clearSearchResults();\r\n    setSearchValue('');\r\n    setSearchStatus('SEARCH_NOT_INITIATED');\r\n    setReplaceValue('');\r\n    setReplaceBtnDisabled(true);\r\n    setReplaceAllBtnDisabled(true);\r\n  }\r\n\r\n  const caseSensitiveSearchOptionOnChange = useCallback(\r\n    function caseSensitiveSearchOptionOnChangeCallback(event) {\r\n      const isChecked = event.target.checked;\r\n      setCaseSensitive(isChecked);\r\n    }, [],\r\n  );\r\n\r\n  const wholeWordSearchOptionOnChange = useCallback(\r\n    function wholeWordSearchOptionOnChangeCallback(event) {\r\n      const isChecked = event.target.checked;\r\n      setWholeWord(isChecked);\r\n    }, [],\r\n  );\r\n\r\n  const wildcardOptionOnChange = useCallback(\r\n    function wildcardOptionOnChangeCallback(event) {\r\n      const isChecked = event.target.checked;\r\n      setWildcard(isChecked);\r\n    }, [],\r\n  );\r\n\r\n  const nextButtonOnClick = useCallback(\r\n    function nextButtonOnClickCallback() {\r\n      if (selectNextResult) {\r\n        selectNextResult(searchResults, activeResultIndex);\r\n      }\r\n    },\r\n    [selectNextResult, searchResults, activeResultIndex],\r\n  );\r\n\r\n  const previousButtonOnClick = useCallback(\r\n    function previousButtonOnClickCallback() {\r\n      if (selectPreviousResult) {\r\n        selectPreviousResult(searchResults, activeResultIndex);\r\n      }\r\n    },\r\n    [selectPreviousResult, searchResults, activeResultIndex],\r\n  );\r\n\r\n  const searchAndReplaceAll = useCallback(\r\n    async function searchAndReplaceAllCallback() {\r\n      if (isReplaceAllBtnDisabled && nextResultValue) {\r\n        return;\r\n      }\r\n      setShowReplaceSpinner(true);\r\n      await getInstanceNode().instance.Core.ContentEdit.searchAndReplaceText({\r\n        documentViewer: getInstanceNode().instance.Core.documentViewer,\r\n        searchResults: core.getPageSearchResults(),\r\n        replaceWith: replaceValue,\r\n      });\r\n      setShowReplaceSpinner(false);\r\n    },\r\n    [replaceValue]\r\n  );\r\n\r\n  const toggleMoreOptionsBtn = () => {\r\n    window.localStorage.setItem('searchMoreOption', !isMoreOptionsOpen);\r\n    setMoreOptionOpen(!isMoreOptionsOpen);\r\n  };\r\n\r\n  const searchAndReplaceOne = useCallback(\r\n    async function searchAndReplaceOneCallback() {\r\n      if (isReplaceBtnDisabled && nextResultValue) {\r\n        return;\r\n      }\r\n      setShowReplaceSpinner(true);\r\n\r\n      await getInstanceNode().instance.Core.ContentEdit.searchAndReplaceText({\r\n        documentViewer: getInstanceNode().instance.Core.documentViewer,\r\n        replaceWith: replaceValue,\r\n        searchResults: [core.getActiveSearchResult()],\r\n      });\r\n\r\n      setShowReplaceSpinner(false);\r\n    },\r\n    [replaceValue, nextResultValue, isReplaceBtnDisabled]\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const replaceAllConfirmationWarning = () => {\r\n    const title = t('option.searchPanel.replaceText');\r\n    const message = t('option.searchPanel.confirmMessageReplaceAll');\r\n    const confirmationWarning = {\r\n      message,\r\n      title,\r\n      confirmBtnText: t('option.searchPanel.confirm'),\r\n      onConfirm: () => {\r\n        searchAndReplaceAll();\r\n      },\r\n    };\r\n    dispatch(actions.showWarningMessage(confirmationWarning));\r\n  };\r\n\r\n  const replaceOneConfirmationWarning = () => {\r\n    const title = t('option.searchPanel.replaceText');\r\n    const message = t('option.searchPanel.confirmMessageReplaceOne');\r\n    const confirmationWarning = {\r\n      message,\r\n      title,\r\n      confirmBtnText: t('option.searchPanel.confirm'),\r\n      onConfirm: () => {\r\n        searchAndReplaceOne();\r\n      },\r\n    };\r\n    dispatch(actions.showWarningMessage(confirmationWarning));\r\n  };\r\n\r\n  if (isSearchOverlayDisabled) {\r\n    return null;\r\n  }\r\n  const numberOfResultsFound = searchResults ? searchResults.length : 0;\r\n\r\n  const showSpinner = (isSearchInProgress)\r\n    ? <Spinner />\r\n    : (searchStatus === 'SEARCH_DONE' && !isProcessingSearchResults)\r\n      ? (<div>{numberOfResultsFound} {t('message.numResultsFound')}</div>)\r\n      : <Spinner />;\r\n\r\n\r\n  const searchOptionsComponents = (<div className=\"options\">\r\n    <Choice\r\n      dataElement=\"caseSensitiveSearchOption\"\r\n      id=\"case-sensitive-option\"\r\n      checked={isCaseSensitive}\r\n      onChange={caseSensitiveSearchOptionOnChange}\r\n      label={t('option.searchPanel.caseSensitive')}\r\n      tabIndex={isPanelOpen ? 0 : -1}\r\n    />\r\n    <Choice\r\n      dataElement=\"wholeWordSearchOption\"\r\n      id=\"whole-word-option\"\r\n      checked={isWholeWord}\r\n      onChange={wholeWordSearchOptionOnChange}\r\n      label={t('option.searchPanel.wholeWordOnly')}\r\n      tabIndex={isPanelOpen ? 0 : -1}\r\n    />\r\n    <Choice\r\n      dataElement=\"wildCardSearchOption\"\r\n      id=\"wild-card-option\"\r\n      checked={isWildcard}\r\n      onChange={wildcardOptionOnChange}\r\n      label={t('option.searchPanel.wildcard')}\r\n      tabIndex={isPanelOpen ? 0 : -1}\r\n    />\r\n  </div>);\r\n\r\n  return (\r\n    <div className=\"SearchOverlay\">\r\n      <div className=\"input-container\">\r\n        <input\r\n          ref={searchTextInputRef}\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          onChange={textInputOnChange}\r\n          value={searchValue}\r\n          placeholder={t('message.searchDocumentPlaceholder')}\r\n          aria-label={t('message.searchDocumentPlaceholder')}\r\n          id=\"SearchPanel__input\"\r\n          tabIndex={isPanelOpen ? 0 : -1}\r\n        />\r\n        {(searchValue !== undefined) && searchValue.length > 0 && (\r\n          <button\r\n            className=\"clearSearch-button\"\r\n            onClick={clearSearchResult}\r\n            aria-label={t('message.searchDocumentPlaceholder')}\r\n          >\r\n            <Icon glyph=\"icon-close\" />\r\n          </button>\r\n        )\r\n        }\r\n      </div>\r\n      {\r\n        (isSearchAndReplaceDisabled || !isReplacementRegexValid) ? null :\r\n          (isMoreOptionsOpen)\r\n            ? <div className=\"extra-options\">\r\n              <button className='Button' onClick={toggleMoreOptionsBtn}>{t('option.searchPanel.lessOptions')} <Icon glyph=\"icon-chevron-up\"/></button>\r\n            </div>\r\n            : <div className=\"extra-options\">\r\n              <button className='Button' onClick={toggleMoreOptionsBtn}>{t('option.searchPanel.moreOptions')} <Icon glyph=\"icon-chevron-down\"/></button>\r\n            </div>\r\n      }\r\n      {\r\n        (!isMoreOptionsOpen) ? searchOptionsComponents :\r\n          <div>\r\n            {searchOptionsComponents}\r\n            {\r\n              (isSearchAndReplaceDisabled || !isReplacementRegexValid) ? null :\r\n                <div data-element=\"searchAndReplace\" className='replace-options'>\r\n                  <p>{t('option.searchPanel.replace')}</p>\r\n                  <div className='input-container'>\r\n                    <input type={'text'}\r\n                      onChange={replaceTextInputOnChange}\r\n                      value={replaceValue}\r\n                    />\r\n                  </div>\r\n                  <div className='replace-buttons'>\r\n                    { (showReplaceSpinner) ? <Spinner width={25} height={25} /> : null }\r\n                    <button className='Button btn-replace-all' disabled={isReplaceAllBtnDisabled}\r\n                      onClick={replaceAllConfirmationWarning}>{t('option.searchPanel.replaceAll')}</button>\r\n                    <button className='Button btn-replace' disabled={isReplaceBtnDisabled || !nextResultValue || !core.getActiveSearchResult()}\r\n                      onClick={replaceOneConfirmationWarning}>{t('option.searchPanel.replace')}</button>\r\n                  </div>\r\n                </div>\r\n            }\r\n          </div>\r\n      }\r\n\r\n      <div className=\"divider\" />\r\n      <div className=\"footer\">\r\n        {searchStatus === 'SEARCH_NOT_INITIATED' || '' ? null : showSpinner}\r\n        {numberOfResultsFound > 0 && (\r\n          <div className=\"buttons\">\r\n            <button className=\"button\" onClick={previousButtonOnClick} aria-label={t('action.prevResult')}>\r\n              <Icon className=\"arrow\" glyph=\"icon-chevron-left\" />\r\n            </button>\r\n            <button className=\"button\" onClick={nextButtonOnClick} aria-label={t('action.nextResult')}>\r\n              <Icon className=\"arrow\" glyph=\"icon-chevron-right\" />\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nSearchOverlay.propTypes = propTypes;\r\n\r\nexport default SearchOverlay;\r\n","import React from 'react';\r\nimport { useDispatch, useStore } from 'react-redux';\r\nimport SearchOverlay from './SearchOverlay';\r\nimport { getOverrideSearchExecution } from 'helpers/search';\r\nimport searchTextFullFactory from '../../apis/searchTextFull';\r\nimport core from 'core';\r\nimport actions from 'actions';\r\n\r\n// exported so that we can test these internal functions\r\nexport function executeSearch(searchValue, options, store) {\r\n  const searchOptions = {\r\n    regex: false,\r\n    ...options,\r\n  };\r\n\r\n  if (searchValue !== null && searchValue !== undefined) {\r\n    // user can override search execution with instance.overrideSearchExecution()\r\n    // Here we check if user has done that and call that rather than default search execution\r\n    const overrideSearchExecution = getOverrideSearchExecution();\r\n    if (overrideSearchExecution) {\r\n      overrideSearchExecution(searchValue, searchOptions);\r\n    } else {\r\n      const searchTextFull = searchTextFullFactory(store);\r\n      searchTextFull(searchValue, searchOptions);\r\n    }\r\n  }\r\n}\r\n\r\nexport function selectNextResult(searchResults = [], activeResultIndex, dispatch) {\r\n  if (searchResults.length > 0) {\r\n    const nextResultIndex = activeResultIndex === searchResults.length - 1 ? 0 : activeResultIndex + 1;\r\n    core.setActiveSearchResult(searchResults[nextResultIndex]);\r\n    if (dispatch) {\r\n      const nextIndex = (nextResultIndex > 0) ? nextResultIndex - 1 : 0;\r\n      dispatch(actions.setNextResultValue(searchResults[nextResultIndex], nextIndex));\r\n    }\r\n  }\r\n}\r\n\r\nexport function selectPreviousResult(searchResults = [], activeResultIndex, dispatch) {\r\n  if (searchResults.length > 0) {\r\n    const prevResultIndex = activeResultIndex <= 0 ? searchResults.length - 1 : activeResultIndex - 1;\r\n    core.setActiveSearchResult(searchResults[prevResultIndex]);\r\n    if (dispatch) {\r\n      dispatch(actions.setNextResultValue(searchResults[prevResultIndex]));\r\n    }\r\n  }\r\n}\r\n\r\nfunction SearchOverlayContainer(props) {\r\n  const dispatch = useDispatch();\r\n  const store = useStore();\r\n  return (\r\n    <SearchOverlay\r\n      executeSearch={(searchValue, options = {}) => {\r\n        executeSearch(searchValue, options, store);\r\n      }}\r\n      selectNextResult={(searchResults = [], activeResultIndex) => {\r\n        selectNextResult(searchResults, activeResultIndex, dispatch);\r\n      }}\r\n      selectPreviousResult={(searchResults = [], activeResultIndex) => {\r\n        selectPreviousResult(searchResults, activeResultIndex, dispatch);\r\n      }}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport default SearchOverlayContainer;\r\n","import selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport { connect } from 'react-redux';\r\nimport React from 'react';\r\nimport SearchOverlayContainer from './SearchOverlayContainer';\r\nimport DataElements from 'src/constants/dataElement';\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isSearchOverlayDisabled: selectors.isElementDisabled(state, DataElements.SEARCH_OVERLAY),\r\n  searchValue: selectors.getSearchValue(state),\r\n  replaceValue: selectors.getReplaceValue(state),\r\n  nextResultValue: selectors.getNextResultValue(state),\r\n  isCaseSensitive: selectors.isCaseSensitive(state),\r\n  isWholeWord: selectors.isWholeWord(state),\r\n  isWildcard: selectors.isWildcard(state),\r\n  isProcessingSearchResults: selectors.isProcessingSearchResults(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  closeElements: actions.closeElements,\r\n  setSearchValue: actions.setSearchValue,\r\n  setReplaceValue: actions.setReplaceValue,\r\n  setCaseSensitive: actions.setCaseSensitive,\r\n  setWholeWord: actions.setWholeWord,\r\n  setWildcard: actions.setWildcard,\r\n};\r\n\r\nfunction SearchOverlayRedux(props) {\r\n  return (<SearchOverlayContainer {...props} />);\r\n}\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(SearchOverlayRedux);\r\n","import SearchOverlay from './SearchOverlayRedux';\r\n\r\nexport default SearchOverlay;\r\n","import React from 'react';\r\nimport core from 'core';\r\nimport { useDispatch } from 'react-redux';\r\nimport actions from 'actions/index';\r\n\r\nfunction useSearch(activeDocumentViewerKey) {\r\n  const [searchResults, setSearchResults] = React.useState([]);\r\n  const [activeSearchResult, setActiveSearchResult] = React.useState();\r\n  const [activeSearchResultIndex, setActiveSearchResultIndex] = React.useState(0);\r\n  const [searchStatus, setSearchStatus] = React.useState('SEARCH_NOT_INITIATED');\r\n  const dispatch = useDispatch();\r\n  const documentViewers = core.getDocumentViewers();\r\n  const documentViewersCount = documentViewers.length;\r\n\r\n\r\n  React.useEffect(() => {\r\n    // First time useSearch is mounted we check if core has results\r\n    // and if it has, we make sure those are set. This will make sure if external search is done\r\n    // that the result will reflect on the UI those set in core\r\n    const activeDocumentViewer = core.getDocumentViewer(activeDocumentViewerKey);\r\n    const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\r\n    if (coreSearchResults.length > 0) {\r\n      const activeSearchResult = core.getActiveSearchResult();\r\n      if (activeSearchResult) {\r\n        const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\r\n          return core.isSearchResultEqual(searchResult, activeSearchResult);\r\n        });\r\n        setSearchResults(coreSearchResults);\r\n        if (newActiveSearchResultIndex >= 0) {\r\n          setActiveSearchResult(coreSearchResults[newActiveSearchResultIndex]);\r\n          setActiveSearchResultIndex(newActiveSearchResultIndex);\r\n        }\r\n      } else {\r\n        setSearchResults(coreSearchResults);\r\n        setActiveSearchResult(coreSearchResults[0]);\r\n        setActiveSearchResultIndex(0);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    const activeDocumentViewer = core.getDocumentViewer(activeDocumentViewerKey);\r\n    function activeSearchResultChanged(newActiveSearchResult) {\r\n      const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\r\n      const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\r\n        return core.isSearchResultEqual(searchResult, newActiveSearchResult);\r\n      });\r\n      if (newActiveSearchResultIndex >= 0) {\r\n        setActiveSearchResult(newActiveSearchResult);\r\n        setActiveSearchResultIndex(newActiveSearchResultIndex);\r\n      }\r\n    }\r\n\r\n    function searchResultsChanged(newSearchResults = []) {\r\n      setSearchResults(newSearchResults);\r\n      if (newSearchResults && newSearchResults.length === 0) {\r\n        setActiveSearchResult(undefined);\r\n        setActiveSearchResultIndex(-1);\r\n      }\r\n    }\r\n\r\n    function searchInProgressEventHandler(isSearching) {\r\n      if (isSearching === undefined || isSearching === null) {\r\n        // if isSearching is not passed at all, we consider that to mean that search was reset to original state\r\n        setSearchStatus('SEARCH_NOT_INITIATED');\r\n      } else if (isSearching) {\r\n        setSearchStatus('SEARCH_IN_PROGRESS');\r\n      } else {\r\n        const defaultActiveSearchResult = activeDocumentViewer.getActiveSearchResult();\r\n\r\n        if (defaultActiveSearchResult) {\r\n          setActiveSearchResult(defaultActiveSearchResult);\r\n          // In core default active search result is the first result\r\n          const coreSearchResults = activeDocumentViewer.getPageSearchResults() || [];\r\n          const newActiveSearchResultIndex = coreSearchResults.findIndex((searchResult) => {\r\n            return core.isSearchResultEqual(searchResult, defaultActiveSearchResult);\r\n          });\r\n          setActiveSearchResultIndex(newActiveSearchResultIndex);\r\n          dispatch(actions.setNextResultValue(defaultActiveSearchResult));\r\n        }\r\n\r\n        setSearchStatus('SEARCH_DONE');\r\n      }\r\n    }\r\n    const documentViewers = core.getDocumentViewers();\r\n\r\n    documentViewers.forEach((documentViewer) => {\r\n      documentViewer.addEventListener('activeSearchResultChanged', activeSearchResultChanged);\r\n      documentViewer.addEventListener('searchResultsChanged', searchResultsChanged);\r\n      documentViewer.addEventListener('searchInProgress', searchInProgressEventHandler);\r\n    });\r\n    return () => {\r\n      documentViewers.forEach((documentViewer) => {\r\n        documentViewer.removeEventListener('activeSearchResultChanged', activeSearchResultChanged);\r\n        documentViewer.removeEventListener('searchResultsChanged', searchResultsChanged);\r\n        documentViewer.removeEventListener('searchInProgress', searchInProgressEventHandler);\r\n      });\r\n    };\r\n  }, [setActiveSearchResult, setActiveSearchResultIndex, setSearchStatus, dispatch, documentViewersCount, activeDocumentViewerKey]);\r\n\r\n  return {\r\n    searchStatus,\r\n    searchResults,\r\n    activeSearchResult,\r\n    activeSearchResultIndex,\r\n    setSearchStatus,\r\n  };\r\n}\r\n\r\nexport default useSearch;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport SearchResult from 'components/SearchResult';\r\nimport SearchOverlay from 'components/SearchOverlay';\r\nimport Icon from 'components/Icon';\r\nimport getClassName from 'helpers/getClassName';\r\nimport DataElementWrapper from 'components/DataElementWrapper';\r\nimport { addSearchListener, removeSearchListener } from 'helpers/search';\r\n\r\nimport './SearchPanel.scss';\r\nimport useSearch from 'hooks/useSearch';\r\n\r\nconst propTypes = {\r\n  isOpen: PropTypes.bool,\r\n  isMobile: PropTypes.bool,\r\n  pageLabels: PropTypes.array,\r\n  currentWidth: PropTypes.number,\r\n  closeSearchPanel: PropTypes.func,\r\n  setActiveResult: PropTypes.func,\r\n  isInDesktopOnlyMode: PropTypes.bool,\r\n  isProcessingSearchResults: PropTypes.bool,\r\n  activeDocumentViewerKey: PropTypes.number\r\n};\r\n\r\nfunction noop() { }\r\n\r\nfunction SearchPanel(props) {\r\n  const {\r\n    isOpen,\r\n    currentWidth,\r\n    pageLabels,\r\n    closeSearchPanel = noop,\r\n    setActiveResult = noop,\r\n    setNextResultValue = noop,\r\n    isMobile = false,\r\n    isInDesktopOnlyMode,\r\n    isProcessingSearchResults,\r\n    activeDocumentViewerKey\r\n  } = props;\r\n\r\n  const { t } = useTranslation();\r\n  const { searchStatus, searchResults, activeSearchResultIndex, setSearchStatus } = useSearch(activeDocumentViewerKey);\r\n\r\n  const onCloseButtonClick = React.useCallback(function onCloseButtonClick() {\r\n    if (closeSearchPanel) {\r\n      closeSearchPanel();\r\n    }\r\n  }, [closeSearchPanel]);\r\n\r\n  const onClickResult = React.useCallback(function onClickResult(resultIndex, result, activeDocumentViewerKey) {\r\n    setActiveResult(result, activeDocumentViewerKey);\r\n    if (!isInDesktopOnlyMode && isMobile) {\r\n      closeSearchPanel();\r\n    }\r\n\r\n    setNextResultValue(result);\r\n  }, [closeSearchPanel, isMobile]);\r\n\r\n  const [isSearchInProgress, setIsSearchInProgress] = React.useState(false);\r\n\r\n  const searchEventListener = () => {\r\n    setIsSearchInProgress(false);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    // componentDidMount\r\n    addSearchListener(searchEventListener);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    // componentWillUnmount\r\n    return () => {\r\n      removeSearchListener(searchEventListener);\r\n    };\r\n  }, []);\r\n\r\n  const className = getClassName('Panel SearchPanel', { isOpen });\r\n  const style = !isInDesktopOnlyMode && isMobile ? {} : { width: `${currentWidth}px`, minWidth: `${currentWidth}px` };\r\n\r\n  return (\r\n    <DataElementWrapper\r\n      className={className}\r\n      dataElement=\"searchPanel\"\r\n      style={style}\r\n    >\r\n      {!isInDesktopOnlyMode && isMobile &&\r\n        <div\r\n          className=\"close-container\"\r\n        >\r\n          <button\r\n            className=\"close-icon-container\"\r\n            onClick={onCloseButtonClick}\r\n          >\r\n            <Icon\r\n              glyph=\"ic_close_black_24px\"\r\n              className=\"close-icon\"\r\n            />\r\n          </button>\r\n        </div>}\r\n      <SearchOverlay\r\n        searchStatus={searchStatus}\r\n        setSearchStatus={setSearchStatus}\r\n        searchResults={searchResults}\r\n        activeResultIndex={activeSearchResultIndex}\r\n        isPanelOpen={isOpen}\r\n        isSearchInProgress={isSearchInProgress}\r\n        setIsSearchInProgress={setIsSearchInProgress}\r\n        activeDocumentViewerKey={activeDocumentViewerKey}\r\n      />\r\n      <SearchResult\r\n        t={t}\r\n        searchStatus={searchStatus}\r\n        searchResults={searchResults}\r\n        activeResultIndex={activeSearchResultIndex}\r\n        onClickResult={onClickResult}\r\n        pageLabels={pageLabels}\r\n        isProcessingSearchResults={isProcessingSearchResults}\r\n        isSearchInProgress={isSearchInProgress}\r\n        activeDocumentViewerKey={activeDocumentViewerKey}\r\n      />\r\n    </DataElementWrapper>\r\n  );\r\n}\r\n\r\nSearchPanel.propTypes = propTypes;\r\n\r\nexport default SearchPanel;\r\n","import React from 'react';\r\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\r\nimport core from 'core';\r\nimport actions from 'actions';\r\nimport selectors from 'selectors';\r\nimport { isMobileSize } from 'helpers/getDeviceSize';\r\nimport SearchPanel from './SearchPanel';\r\nimport DataElements from 'constants/dataElement';\r\n\r\nfunction SearchPanelContainer(props) {\r\n  const isMobile = isMobileSize();\r\n\r\n  const [\r\n    isOpen,\r\n    currentWidth,\r\n    pageLabels,\r\n    shouldClearSearchPanelOnClose,\r\n    isInDesktopOnlyMode,\r\n    isProcessingSearchResults,\r\n    activeDocumentViewerKey,\r\n  ] = useSelector(\r\n    (state) => [\r\n      selectors.isElementOpen(state, DataElements.SEARCH_PANEL),\r\n      selectors.getSearchPanelWidth(state),\r\n      selectors.getPageLabels(state),\r\n      selectors.shouldClearSearchPanelOnClose(state),\r\n      selectors.isInDesktopOnlyMode(state),\r\n      selectors.isProcessingSearchResults(state),\r\n      selectors.getActiveDocumentViewerKey(state),\r\n    ],\r\n    shallowEqual,\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n  const closeSearchPanel = React.useCallback(\r\n    function closeSearchPanel() {\r\n      dispatch(actions.closeElements([DataElements.SEARCH_PANEL]));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const clearSearchInputValue = React.useCallback(\r\n    function clearSearchInputValue() {\r\n      dispatch(actions.setSearchValue(''));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const setNextResultValue = React.useCallback(\r\n    function setNextResultValue(searchResults) {\r\n      dispatch(actions.setNextResultValue(searchResults));\r\n    },\r\n    [dispatch],\r\n  );\r\n\r\n  const setActiveResult = React.useCallback(function setActiveResult(result, activeDocumentViewerKey) {\r\n    if (activeDocumentViewerKey) {\r\n      const activeDocumentviewer = core.getDocumentViewer(activeDocumentViewerKey);\r\n      return activeDocumentviewer.setActiveSearchResult(result);\r\n    }\r\n  }, []);\r\n\r\n  /*\r\n  React.useEffect(function SearchPanelVisibilityChangedEffect() {\r\n    function clearSearchResultsOnPanelClose(event) {\r\n      if (!event && !event.detail) {\r\n        return;\r\n      }\r\n      const { detail } = event;\r\n      if (detail.element === 'searchPanel' && detail.isVisible === false) {\r\n        // clear search results when search panel is closed\r\n        core.clearSearchResults();\r\n        clearSearchInputValue();\r\n      }\r\n    }\r\n    if (isMobile) {\r\n      // for mobile we want to keep results in panel as search panel is on top of the content\r\n      // and user will need to close the panel to view the content.\r\n      return;\r\n    }\r\n    if (!shouldClearSearchPanelOnClose) {\r\n      return;\r\n    }\r\n    window.addEventListener('visibilityChanged',  clearSearchResultsOnPanelClose);\r\n    return function SearchPanelVisibilityChangedEffectCleanUp() {\r\n      window.removeEventListener('visibilityChanged',  clearSearchResultsOnPanelClose);\r\n    };\r\n  }, [isMobile, clearSearchInputValue, shouldClearSearchPanelOnClose]);\r\n   */\r\n\r\n  React.useEffect(\r\n    function clearSearchResult() {\r\n      if (!isInDesktopOnlyMode && isMobile) {\r\n        // for mobile we want to keep results in panel as search panel is on top of the content\r\n        // and user will need to close the panel to view the content.\r\n        return;\r\n      }\r\n\r\n      if (!isOpen && shouldClearSearchPanelOnClose) {\r\n        core.clearSearchResults();\r\n        clearSearchInputValue();\r\n      }\r\n    },\r\n    [isMobile, isOpen, shouldClearSearchPanelOnClose, isInDesktopOnlyMode],\r\n  );\r\n\r\n  const combinedProps = {\r\n    ...props,\r\n    isOpen,\r\n    currentWidth,\r\n    pageLabels,\r\n    closeSearchPanel,\r\n    setActiveResult,\r\n    setNextResultValue,\r\n    isMobile,\r\n    isInDesktopOnlyMode,\r\n    isProcessingSearchResults,\r\n    activeDocumentViewerKey,\r\n  };\r\n\r\n  return <SearchPanel {...combinedProps} />;\r\n}\r\n\r\nexport default SearchPanelContainer;\r\n","import SearchPanelContainer from './SearchPanelContainer';\r\n\r\nexport default SearchPanelContainer;\r\n"],"sourceRoot":""}