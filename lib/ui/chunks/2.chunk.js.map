{"version":3,"sources":["webpack:///./src/ui/src/components/CustomizablePopup/CustomizablePopup.js","webpack:///./src/ui/src/components/CustomizablePopup/index.js"],"names":["propTypes","dataElement","PropTypes","string","isRequired","children","arrayOf","any","CustomizablePopup","childrenClassName","items","useSelector","state","selectors","getPopupItems","shallowEqual","childrenArray","React","Children","toArray","map","item","i","type","hidden","key","mediaQueryClassName","screen","join","component","find","child","props","className","ToolButton","ToolGroupButton","ToggleElementButton","ActionButton","StatefulButton","CustomElement","cloneElement"],"mappings":"gzDAaA,IAAMA,EAAY,CAGhBC,YAAaC,IAAUC,OAAOC,WAE9BC,SAAUH,IAAUI,QAAQJ,IAAUK,KAAKH,YAGvCI,EAAoB,SAAH,GAAqD,IAA/CP,EAAW,EAAXA,YAAaI,EAAQ,EAARA,SAAUI,EAAiB,EAAjBA,kBAC5CC,EAAQC,aACZ,SAACC,GAAK,OAAKC,IAAUC,cAAcF,EAAOX,KAC1Cc,KAGIC,EAAgBC,IAAMC,SAASC,QAAQd,GA2B7C,OAAOK,EAAMU,KAAI,SAACC,EAAMC,GACtB,IAAQrB,EAA8BoB,EAA9BpB,YAAasB,EAAiBF,EAAjBE,KAAMC,EAAWH,EAAXG,OACrBC,EAAM,GAAH,OAAMF,EAAI,YAAItB,GAAeqB,GAChCI,EAAsBF,aAAM,EAANA,EACxBJ,KAAI,SAACO,GAAM,wBAAgBA,MAC5BC,KAAK,KACJC,EAAYb,EAAcc,MAC5B,SAACC,GAAK,OAAKA,EAAMC,MAAM/B,cAAgBA,KAIzC,IAAK4B,EAAW,CACd,IAAMG,EAAQ,EAAH,KAAQX,GAAI,IAAEK,sBAAqBO,UAAWxB,IAE5C,eAATc,IACFM,EAAY,kBAACK,EAAA,EAAeF,IAGjB,oBAATT,IACFM,EAAY,kBAACM,EAAA,EAAoBH,IAGtB,wBAATT,IACFM,EAAY,kBAACO,EAAA,EAAwBJ,IAG1B,iBAATT,IACFM,EAAY,kBAACQ,EAAA,EAAiBL,IAGnB,mBAATT,IACFM,EAAY,kBAACS,EAAA,EAAmBN,IAGrB,kBAATT,IACFM,EAAY,kBAACU,EAAA,EAAkBP,IAGpB,WAATT,GAA8B,YAATA,IACvBM,EACE,2BAAKI,UAAS,UAAKV,EAAI,YAAIG,IAA2BM,KAK5D,OAAOH,EACHZ,IAAMuB,aAAaX,EAAW,CAC9BJ,QAEA,SAIRjB,EAAkBR,UAAYA,EAEfQ,QC3GAA","file":"chunks/2.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useSelector, shallowEqual } from 'react-redux';\r\n\r\nimport ToolButton from 'components/ToolButton';\r\nimport ToolGroupButton from 'components/ToolGroupButton';\r\nimport ToggleElementButton from 'components/ToggleElementButton';\r\nimport ActionButton from 'components/ActionButton';\r\nimport StatefulButton from 'components/StatefulButton';\r\nimport CustomElement from 'components/CustomElement';\r\n\r\nimport selectors from 'selectors';\r\n\r\nconst propTypes = {\r\n  // The data element of the popup component.\r\n  // Used to grab button props from redux and use those props to override the existing ones, if there're any\r\n  dataElement: PropTypes.string.isRequired,\r\n  // An object that maps an item's dataElement to a functional React component\r\n  children: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n};\r\n\r\nconst CustomizablePopup = ({ dataElement, children, childrenClassName }) => {\r\n  const items = useSelector(\r\n    (state) => selectors.getPopupItems(state, dataElement),\r\n    shallowEqual,\r\n  );\r\n\r\n  const childrenArray = React.Children.toArray(children);\r\n\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    // give a error message in the console if a child's dataElement in the childrenArray isn't in the redux state\r\n    childrenArray.forEach((child) => {\r\n      const found = items.some(\r\n        ({ dataElement }) => dataElement === child.props.dataElement,\r\n      );\r\n      if (!found) {\r\n        const error = `\r\n        A React component with dataElement ${child.props.dataElement} won't be rendered because it isn't in the redux state. Modify initialState.js like below to fix this issue:\r\n\r\n        {\r\n          viewer: {\r\n            ...,\r\n            ${dataElement}: [\r\n              ...,\r\n              { dataElement: '${child.props.dataElement}' },\r\n            ]\r\n          }\r\n        }\r\n      `;\r\n        console.error(error.replace(/\\s+/, ''));\r\n      }\r\n    });\r\n  }\r\n\r\n  return items.map((item, i) => {\r\n    const { dataElement, type, hidden } = item;\r\n    const key = `${type}-${dataElement || i}`;\r\n    const mediaQueryClassName = hidden\r\n      ?.map((screen) => `hide-in-${screen}`)\r\n      .join(' ');\r\n    let component = childrenArray.find(\r\n      (child) => child.props.dataElement === dataElement,\r\n    );\r\n\r\n    // duplicate code in HeaderItems.js, must clean up after 6.0\r\n    if (!component) {\r\n      const props = { ...item, mediaQueryClassName, className: childrenClassName };\r\n\r\n      if (type === 'toolButton') {\r\n        component = <ToolButton {...props} />;\r\n      }\r\n\r\n      if (type === 'toolGroupButton') {\r\n        component = <ToolGroupButton {...props} />;\r\n      }\r\n\r\n      if (type === 'toggleElementButton') {\r\n        component = <ToggleElementButton {...props} />;\r\n      }\r\n\r\n      if (type === 'actionButton') {\r\n        component = <ActionButton {...props} />;\r\n      }\r\n\r\n      if (type === 'statefulButton') {\r\n        component = <StatefulButton {...props} />;\r\n      }\r\n\r\n      if (type === 'customElement') {\r\n        component = <CustomElement {...props} />;\r\n      }\r\n\r\n      if (type === 'spacer' || type === 'divider') {\r\n        component = (\r\n          <div className={`${type} ${mediaQueryClassName}`} {...props} />\r\n        );\r\n      }\r\n    }\r\n\r\n    return component\r\n      ? React.cloneElement(component, {\r\n        key,\r\n      })\r\n      : null;\r\n  });\r\n};\r\n\r\nCustomizablePopup.propTypes = propTypes;\r\n\r\nexport default CustomizablePopup;\r\n","import CustomizablePopup from './CustomizablePopup';\r\n\r\nexport default CustomizablePopup;"],"sourceRoot":""}