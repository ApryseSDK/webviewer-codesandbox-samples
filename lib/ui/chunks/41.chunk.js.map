{"version":3,"sources":["webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.scss?4564","webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.scss","webpack:///./src/ui/src/components/OpenFileModal/OpenFileModal.js","webpack:///./src/ui/src/components/OpenFileModal/index.js"],"names":["api","content","__esModule","default","module","i","options","styleTag","webComponents","document","getElementsByTagName","length","clonedStyleTags","webComponent","shadowRoot","appendChild","onload","forEach","styleNode","innerHTML","cloneNode","push","head","exports","locals","mapDispatchToProps","closeElements","actions","connect","state","isDisabled","selectors","isElementDisabled","DataElements","OPEN_FILE_MODAL","isOpen","isElementOpen","tabManager","getTabManager","t","useTranslation","useState","src","setSrc","extension","setExtension","filename","setFilename","size","setSize","error","setError","closeModal","useEffect","PRINT_MODAL","LOADING_MODAL","PROGRESS_MODAL","ERROR_MODAL","MODEL3D_MODAL","handleAddTab","source","_extension","_filename","_size","acceptFormats","indexOf","useDb","TabManager","MAX_FILE_SIZE","addTab","setActive","saveCurrentActiveTabState","useDB","modalClass","classNames","Modal","OpenFileModal","open","closed","extensionRegExp","handleFileChange","file","window","Core","Document","type","ext","mimeTypeToExtension","exec","name","URL","createObjectURL","handleURLChange","url","trim","substring","lastIndexOf","split","getHashParameters","SupportedFileFormats","SERVER","CLIENT","reduce","uniqueArr","curr","className","data-element","onMouseDown","e","stopPropagation","ModalWrapper","title","closeButtonDataElement","onCloseClick","swipeToClose","closeHandler","Tabs","id","dataElement","FileInputPanel","onFileSelect","defaultValue","FilePickerPanel","onFileProcessed","urlError","fileError","extensionError","Button","label","style","width","onClick"],"mappings":"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","file":"chunks/41.chunk.js","sourcesContent":["var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./OpenFileModal.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\r\n                const webComponents = document.getElementsByTagName('apryse-webviewer');\r\n                if (webComponents.length > 0) {\r\n                  const clonedStyleTags = [];\r\n                  for (let i = 0; i < webComponents.length; i++) {\r\n                    const webComponent = webComponents[i];\r\n                    if (i === 0) {\r\n                      webComponent.shadowRoot.appendChild(styleTag);\r\n                      styleTag.onload = function () {\r\n                        if (clonedStyleTags.length > 0) {\r\n                          clonedStyleTags.forEach((styleNode) => {\r\n                            // eslint-disable-next-line no-unsanitized/property\r\n                            styleNode.innerHTML = styleTag.innerHTML;\r\n                          });\r\n                        }\r\n                      };\r\n                    } else {\r\n                      const styleNode = styleTag.cloneNode(true);\r\n                      webComponent.shadowRoot.appendChild(styleNode);\r\n                      clonedStyleTags.push(styleNode);\r\n                    }\r\n                  }\r\n                } else {\r\n                  document.head.appendChild(styleTag);\r\n                }\r\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.OpenFileModal .container{overflow-y:unset;width:600px}.OpenFileModal .image-signature{height:240px!important;width:100%}.OpenFileModal .error{color:red;margin:5px}.OpenFileModal .extension-dropdown{padding:0 16px;display:flex;flex-direction:column}.OpenFileModal .extension-dropdown p{width:100%;font-size:13px;line-height:16px;font-weight:700;order:1}.OpenFileModal .extension-dropdown .Dropdown__wrapper{order:2;width:100%}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown{width:100%!important}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown__items{width:100%}.OpenFileModal .extension-dropdown .Dropdown__wrapper .arrow{flex:unset;width:12px;height:16px;margin-top:2px}.OpenFileModal .extension-dropdown .Dropdown__wrapper .Dropdown .picked-option .picked-option-text{flex:none;width:unset}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport TabManager from 'helpers/TabManager';\r\nimport classNames from 'classnames';\r\nimport getHashParameters from 'helpers/getHashParameters';\r\nimport Button from 'components/Button';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Tabs, Tab, TabPanel } from 'components/Tabs';\r\nimport FileInputPanel from 'components/PageReplacementModal/FileInputPanel';\r\nimport FilePickerPanel from 'components/PageReplacementModal/FilePickerPanel';\r\nimport selectors from 'selectors';\r\nimport actions from 'actions';\r\nimport DataElements from 'constants/dataElement';\r\nimport ModalWrapper from '../ModalWrapper';\r\n\r\nimport '../PageReplacementModal/PageReplacementModal.scss';\r\nimport './OpenFileModal.scss';\r\n\r\nconst OpenFileModal = ({ isDisabled, isOpen, tabManager, closeElements }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const [src, setSrc] = useState('');\r\n  const [extension, setExtension] = useState('pdf');\r\n  const [filename, setFilename] = useState();\r\n  const [size, setSize] = useState();\r\n  const [error, setError] = useState({ 'fileError': '', 'urlError': '', 'extensionError': '' });\r\n\r\n  const closeModal = () => {\r\n    closeElements([DataElements.OPEN_FILE_MODAL]);\r\n    setSrc('');\r\n    setError({ 'fileError': '', 'urlError': '' });\r\n    setFilename(null);\r\n    setExtension('pdf');\r\n    setSize(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      closeElements([\r\n        DataElements.PRINT_MODAL,\r\n        DataElements.LOADING_MODAL,\r\n        DataElements.PROGRESS_MODAL,\r\n        DataElements.ERROR_MODAL,\r\n        DataElements.MODEL3D_MODAL,\r\n      ]);\r\n    } else {\r\n      setSrc('');\r\n      setError({ 'fileError': '', 'urlError': '' });\r\n      setFilename(null);\r\n      setExtension(null);\r\n      setSize(null);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleAddTab = async (source, _extension, _filename, _size) => {\r\n    if (!source) {\r\n      return setError({ 'urlError': 'URL or File must be provided' });\r\n    }\r\n    if (!_extension || acceptFormats.indexOf(_extension) === -1) {\r\n      return setError({ 'extensionError': 'Extension must be provided' });\r\n    }\r\n    const useDb = !_size || TabManager.MAX_FILE_SIZE > _size;\r\n    await tabManager.addTab(source, {\r\n      extension: _extension,\r\n      filename: _filename,\r\n      setActive: true,\r\n      saveCurrentActiveTabState: true,\r\n      useDB: useDb\r\n    });\r\n    closeModal();\r\n  };\r\n\r\n  const modalClass = classNames({\r\n    Modal: true,\r\n    OpenFileModal: true,\r\n    open: isOpen,\r\n    closed: !isOpen,\r\n  });\r\n\r\n  const extensionRegExp = /(?:\\.([^.?]+))?$/;\r\n\r\n  const handleFileChange = async (file) => {\r\n    setError(null);\r\n    if (!file) {\r\n      return;\r\n    }\r\n    if (file instanceof window.Core.Document) {\r\n      await handleAddTab(file, file.type, file.filename);\r\n    } else {\r\n      const ext = window.Core.mimeTypeToExtension[file.type] || extensionRegExp.exec(file.name)[1] || null;\r\n      const filename = file.name;\r\n      const size = file.size;\r\n      const src = URL.createObjectURL(file);\r\n      setSrc(src);\r\n      setFilename(filename);\r\n      setExtension(ext);\r\n      setSize(size);\r\n      await handleAddTab(file, ext, filename, size);\r\n    }\r\n  };\r\n\r\n  const handleURLChange = async (url) => {\r\n    setError(null);\r\n    setSrc(url.trim());\r\n    const filename = url.substring(url.lastIndexOf('/') + 1).split('?')[0];\r\n    setFilename(filename);\r\n    setExtension(extensionRegExp.exec(filename)[1]);\r\n    setSize(null);\r\n  };\r\n\r\n  const wvServer = !!getHashParameters('webviewerServerURL', null);\r\n  let acceptFormats = wvServer ? window.Core.SupportedFileFormats.SERVER : window.Core.SupportedFileFormats.CLIENT;\r\n  acceptFormats = acceptFormats.reduce((uniqueArr, curr) => {\r\n    if (uniqueArr.indexOf(curr) === -1) {\r\n      uniqueArr.push(curr);\r\n    }\r\n    return uniqueArr;\r\n  }, []);\r\n\r\n  return !isDisabled && (\r\n    <div className={modalClass} data-element={DataElements.OPEN_FILE_MODAL} onMouseDown={closeModal}>\r\n      <div className=\"container\" onMouseDown={(e) => e.stopPropagation()}>\r\n        <ModalWrapper\r\n          title={t('OpenFile.enterUrlOrChooseFile')}\r\n          closeButtonDataElement={'openFileModalClose'}\r\n          onCloseClick={closeModal}\r\n          swipeToClose\r\n          closeHandler={closeModal}\r\n        >\r\n          <div className=\"swipe-indicator\" />\r\n          <Tabs className=\"open-file-modal-tabs\" id=\"openFileModal\">\r\n            <div className=\"tabs-header-container\">\r\n              <div className=\"tab-list\">\r\n                <Tab dataElement=\"urlInputPanelButton\">\r\n                  <button className=\"tab-options-button\">\r\n                    {t('link.url')}\r\n                  </button>\r\n                </Tab>\r\n                <div className=\"tab-options-divider\" />\r\n                <Tab dataElement=\"filePickerPanelButton\">\r\n                  <button className=\"tab-options-button\">\r\n                    {t('option.pageReplacementModal.localFile')}\r\n                  </button>\r\n                </Tab>\r\n              </div>\r\n            </div>\r\n            <div className=\"page-replacement-divider\" />\r\n            <TabPanel dataElement=\"urlInputPanel\">\r\n              <div className=\"panel-body\">\r\n                <FileInputPanel\r\n                  onFileSelect={(url) => {\r\n                    handleURLChange(url);\r\n                  }}\r\n                  acceptFormats={acceptFormats}\r\n                  extension={extension}\r\n                  setExtension={setExtension}\r\n                  defaultValue={src}\r\n                />\r\n              </div>\r\n            </TabPanel>\r\n            <TabPanel dataElement=\"filePickerPanel\">\r\n              <div className=\"panel-body\">\r\n                <FilePickerPanel\r\n                  onFileProcessed={(file) => handleFileChange(file)}\r\n                />\r\n              </div>\r\n            </TabPanel>\r\n          </Tabs>\r\n          <div className=\"page-replacement-divider\" />\r\n          <div className=\"footer\">\r\n            {error?.urlError && <p className=\"error\">* {error.urlError}</p>}\r\n            {error?.fileError && <p className=\"error\">* {error.fileError}</p>}\r\n            {error?.extensionError && <p className=\"error\">* {error.extensionError}</p>}\r\n            <Button\r\n              className=\"modal-btn\"\r\n              dataElement=\"linkSubmitButton\"\r\n              label={t('OpenFile.addTab')}\r\n              style={{ width: 90 }}\r\n              onClick={() => handleAddTab(src, extension, filename, size)}\r\n            />\r\n          </div>\r\n        </ModalWrapper>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isDisabled: selectors.isElementDisabled(state, DataElements.OPEN_FILE_MODAL),\r\n  isOpen: selectors.isElementOpen(state, DataElements.OPEN_FILE_MODAL),\r\n  tabManager: selectors.getTabManager(state),\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  closeElements: actions.closeElements,\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(OpenFileModal);\r\n","import OpenFileModal from './OpenFileModal';\r\n\r\nexport default OpenFileModal;\r\n"],"sourceRoot":""}